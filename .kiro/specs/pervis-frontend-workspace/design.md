# Design Document: å‰ç«¯å·¥ä½œå°ç›®å½•é¡µ

## Overview

æœ¬è®¾è®¡æ–‡æ¡£æè¿° Pervis PRO å‰ç«¯å·¥ä½œå°ç›®å½•é¡µçš„æŠ€æœ¯å®ç°æ–¹æ¡ˆã€‚

## æ¶æ„è®¾è®¡

### ç»„ä»¶å±‚æ¬¡ç»“æ„

```
App.tsx
â”œâ”€â”€ LandingPage (é¦–é¡µ)
â”œâ”€â”€ ProjectWizard (å‘å¯¼ Modal)
â””â”€â”€ Workspace (å·¥ä½œå°) â† æ–°å¢
    â”œâ”€â”€ WorkspaceHeader (é¡¶éƒ¨æ )
    â”‚   â”œâ”€â”€ ProjectTitle
    â”‚   â”œâ”€â”€ TabNavigation â† æ ¸å¿ƒç»„ä»¶
    â”‚   â””â”€â”€ GlobalActions
    â”œâ”€â”€ WorkspaceContent (å†…å®¹åŒº)
    â”‚   â”œâ”€â”€ ProjectInfoTab â† æ–°å¢
    â”‚   â”œâ”€â”€ BeatboardTab (å¤ç”¨ StepBeatBoard)
    â”‚   â””â”€â”€ PreviewTab (å¤ç”¨ StepTimeline)
    â””â”€â”€ WorkspaceSidebar (ä¾§è¾¹æ )
        â”œâ”€â”€ AssetLibrary
        â”œâ”€â”€ AIAssistant
        â””â”€â”€ Settings
```

### çŠ¶æ€ç®¡ç†

```typescript
// WorkspaceContext.tsx
interface WorkspaceState {
  activeTab: 'info' | 'beatboard' | 'preview';
  project: Project;
  isEditing: boolean;
  sidebarCollapsed: boolean;
}

// Tab çŠ¶æ€æŒä¹…åŒ–
// ä½¿ç”¨ localStorage ä¿å­˜ç”¨æˆ·æœ€åè®¿é—®çš„ Tab
```

## ç»„ä»¶è®¾è®¡

### 1. Workspace ä¸»ç»„ä»¶

```typescript
// frontend/components/Workspace/index.tsx
interface WorkspaceProps {
  project: Project;
  onUpdateProject: (updates: Partial<Project>) => void;
  onExit: () => void;
}

// èŒè´£ï¼š
// - ç®¡ç† Tab çŠ¶æ€
// - åè°ƒå­ç»„ä»¶é€šä¿¡
// - å¤„ç†é”®ç›˜å¿«æ·é”®
```

### 2. TabNavigation ç»„ä»¶

```typescript
// frontend/components/Workspace/TabNavigation.tsx
interface TabNavigationProps {
  activeTab: TabType;
  onTabChange: (tab: TabType) => void;
}

type TabType = 'info' | 'beatboard' | 'preview';

// Tab é…ç½®
const TABS = [
  { id: 'info', label: 'ç«‹é¡¹ä¿¡æ¯', icon: FileText, shortcut: 'Ctrl+1' },
  { id: 'beatboard', label: 'Beatboard', icon: LayoutDashboard, shortcut: 'Ctrl+2' },
  { id: 'preview', label: 'é¢„æ¼”æ¨¡å¼', icon: Play, shortcut: 'Ctrl+3' },
];
```

### 3. ProjectInfoTab ç»„ä»¶

```typescript
// frontend/components/Workspace/ProjectInfoTab.tsx
interface ProjectInfoTabProps {
  project: Project;
  onUpdate: (updates: Partial<Project>) => void;
}

// å­ç»„ä»¶ï¼š
// - BasicInfoSection (åŸºæœ¬ä¿¡æ¯)
// - ScriptSection (å‰§æœ¬/Logline/Synopsis)
// - CharactersSection (è§’è‰²åˆ—è¡¨)
// - ScenesSection (åœºæ¬¡åˆ—è¡¨)
// - ReferencesSection (å‚è€ƒèµ„æ–™)
```

### 4. BeatboardTab ç»„ä»¶

```typescript
// frontend/components/Workspace/BeatboardTab.tsx
// åŒ…è£… StepBeatBoardï¼Œé€‚é… Tab æ¥å£

interface BeatboardTabProps {
  project: Project;
  onUpdateBeats: (beats: Beat[]) => void;
}
```

### 5. PreviewTab ç»„ä»¶

```typescript
// frontend/components/Workspace/PreviewTab.tsx
// åŒ…è£… StepTimeline çš„é¢„è§ˆåŠŸèƒ½

interface PreviewTabProps {
  project: Project;
  onExport: () => void;
}
```

## è·¯ç”±è®¾è®¡

### å½“å‰è·¯ç”±ï¼ˆæ— å˜åŒ–ï¼‰

```
/ â†’ LandingPage
```

### çŠ¶æ€é©±åŠ¨çš„è§†å›¾åˆ‡æ¢

```typescript
// App.tsx ä¸­çš„çŠ¶æ€
const [project, setProject] = useState<Project | null>(null);
const [workspaceTab, setWorkspaceTab] = useState<TabType>('info');

// è§†å›¾æ¸²æŸ“é€»è¾‘
if (!project) {
  return <LandingPage />;
}
return <Workspace project={project} activeTab={workspaceTab} />;
```

## æ•°æ®æµè®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         App.tsx                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ project: Project                                     â”‚    â”‚
â”‚  â”‚ workspaceTab: TabType                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                           â”‚                                  â”‚
â”‚                           â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    Workspace                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ InfoTab â”‚  â”‚ BeatboardTabâ”‚  â”‚ PreviewTab  â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚       â”‚              â”‚                â”‚             â”‚    â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚
â”‚  â”‚                      â”‚                              â”‚    â”‚
â”‚  â”‚                      â–¼                              â”‚    â”‚
â”‚  â”‚              onUpdateProject()                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## UI è®¾è®¡

### å·¥ä½œå°å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] PreVis Pro    â”‚ é¡¹ç›®åç§° â–¼ â”‚        [è®¾ç½®] [å¯¼å‡º]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  ç«‹é¡¹ä¿¡æ¯    â”‚  Beatboard   â”‚  é¢„æ¼”æ¨¡å¼    â”‚  â† Tab å¯¼èˆª   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚                    Tab å†…å®¹åŒºåŸŸ                        â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tab æ ·å¼

```css
/* Tab å¯¼èˆªæ ·å¼ */
.tab-nav {
  display: flex;
  gap: 0;
  border-bottom: 1px solid var(--border-color);
}

.tab-item {
  padding: 12px 24px;
  border-bottom: 2px solid transparent;
  cursor: pointer;
}

.tab-item.active {
  border-bottom-color: var(--accent-color);
  color: var(--accent-color);
}
```

## å®ç°ç­–ç•¥

### Phase 1: åŸºç¡€æ¶æ„ (2å°æ—¶)
1. åˆ›å»º Workspace ç»„ä»¶ç›®å½•ç»“æ„
2. å®ç° TabNavigation ç»„ä»¶
3. ä¿®æ”¹ App.tsx é›†æˆ Workspace

### Phase 2: ç«‹é¡¹ä¿¡æ¯ Tab (3å°æ—¶)
1. åˆ›å»º ProjectInfoTab ç»„ä»¶
2. å®ç°å„ä¸ªä¿¡æ¯ Section
3. å®ç°ç¼–è¾‘åŠŸèƒ½

### Phase 3: å¤ç”¨ç°æœ‰ç»„ä»¶ (1å°æ—¶)
1. åˆ›å»º BeatboardTab åŒ…è£…ç»„ä»¶
2. åˆ›å»º PreviewTab åŒ…è£…ç»„ä»¶
3. æµ‹è¯•ç»„ä»¶é›†æˆ

### Phase 4: ä¼˜åŒ–å’Œæµ‹è¯• (1å°æ—¶)
1. æ·»åŠ é”®ç›˜å¿«æ·é”®
2. æ·»åŠ çŠ¶æ€æŒä¹…åŒ–
3. æµ‹è¯•å®Œæ•´æµç¨‹

## é£é™©å’Œç¼“è§£

| é£é™© | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|----------|
| ç°æœ‰ç»„ä»¶è€¦åˆåº¦é«˜ | éš¾ä»¥å¤ç”¨ | åˆ›å»ºé€‚é…å™¨ç»„ä»¶ |
| çŠ¶æ€åŒæ­¥é—®é¢˜ | æ•°æ®ä¸ä¸€è‡´ | ä½¿ç”¨ç»Ÿä¸€çš„ Context |
| æ€§èƒ½é—®é¢˜ | Tab åˆ‡æ¢å¡é¡¿ | ä½¿ç”¨ React.memo å’Œæ‡’åŠ è½½ |

---

## é¢„æ¼”æ¨¡å¼å¢å¼ºè®¾è®¡ï¼ˆæ–°å¢ 2025-12-29ï¼‰

### 1. é¢„æ¼”æ¨¡å¼æ•°æ®éš”ç¦»æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¢„æ¼”æ¨¡å¼æ•°æ®éš”ç¦»æ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   ä¸» Beatboard   â”‚ â”€â”€å¤åˆ¶â”€â”€â–¶â”‚  é¢„æ¼” Beatboard  â”‚                   â”‚
â”‚  â”‚   (Main Data)   â”‚         â”‚  (Preview Data) â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                           â”‚                             â”‚
â”‚           â”‚                           â”‚ ç‹¬ç«‹ä¿®æ”¹                    â”‚
â”‚           â”‚                           â–¼                             â”‚
â”‚           â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚           â”‚                  â”‚  é¢„æ¼”æ—¶é—´è½´      â”‚                   â”‚
â”‚           â”‚                  â”‚  (Preview TL)   â”‚                   â”‚
â”‚           â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚           â”‚                           â”‚                             â”‚
â”‚           â”‚         â—€â”€â”€æ‰‹åŠ¨åŒæ­¥â”€â”€     â”‚                             â”‚
â”‚           â–¼                           â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ•°æ®å­˜å‚¨å±‚                                â”‚   â”‚
â”‚  â”‚  main_beatboard_data: BeatboardData                         â”‚   â”‚
â”‚  â”‚  preview_beatboard_data: BeatboardData | null               â”‚   â”‚
â”‚  â”‚  data_source: 'main' | 'preview'                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. é¢„æ¼” Beatboard æ•°æ®ç»“æ„

```typescript
interface PreviewBeatboardState {
  // é¢„æ¼”æ•°æ®ï¼ˆä»ä¸» Beatboard å¤åˆ¶ï¼‰
  previewData: BeatboardData | null;
  
  // æ•°æ®æ¥æºæ ‡è¯†
  dataSource: 'main' | 'preview';
  
  // åŒæ­¥çŠ¶æ€
  lastSyncTime: Date | null;
  hasUnsyncedChanges: boolean;
  
  // æ“ä½œ
  initPreviewData: () => void;           // å¤åˆ¶ä¸»æ•°æ®åˆ°é¢„æ¼”
  syncToMain: () => void;                // åŒæ­¥é¢„æ¼”æ•°æ®åˆ°ä¸» Beatboard
  discardPreviewChanges: () => void;     // ä¸¢å¼ƒé¢„æ¼”ä¿®æ”¹
}
```

### 3. çœŸå®éŸ³é¢‘è½¨é“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ—¶é—´è½´éŸ³é¢‘è½¨é“æ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è§†é¢‘è½¨é“ (Video Track)                                      â”‚   â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åŸå£°è½¨é“ (Original Audio) ğŸ”Š â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚   â”‚
â”‚  â”‚  æ³¢å½¢: â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  BGM è½¨é“ (Background Music) ğŸµ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚   â”‚
â”‚  â”‚  æ³¢å½¢: â–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒâ–ƒ                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  éŸ³æ•ˆè½¨é“ (SFX) ğŸ”” â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚   â”‚
â”‚  â”‚  æ³¢å½¢: â–â–â–â–â–â–â–â–â–ˆâ–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å¯¹ç™½è½¨é“ (Voice Over) ğŸ¤ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚   â”‚
â”‚  â”‚  æ³¢å½¢: â–â–â–â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–â–â–â–â–â–â–â–â–â–â–â–â–â–                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. éŸ³é¢‘è½¨é“æ•°æ®ç»“æ„

```typescript
interface AudioTrack {
  id: string;
  type: 'original' | 'bgm' | 'sfx' | 'vo';  // è½¨é“ç±»å‹
  name: string;                              // è½¨é“åç§°
  
  // éŸ³é¢‘æ•°æ®
  audioUrl: string;                          // éŸ³é¢‘æ–‡ä»¶ URL
  waveformData: number[];                    // æ³¢å½¢æ•°æ®ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰
  duration: number;                          // æ—¶é•¿ï¼ˆç§’ï¼‰
  
  // è½¨é“æ§åˆ¶
  volume: number;                            // éŸ³é‡ (0-1)
  isMuted: boolean;                          // æ˜¯å¦é™éŸ³
  isSolo: boolean;                           // æ˜¯å¦ç‹¬å¥
  
  // æ—¶é—´è½´ä½ç½®
  startTime: number;                         // å¼€å§‹æ—¶é—´ï¼ˆç§’ï¼‰
  endTime: number;                           // ç»“æŸæ—¶é—´ï¼ˆç§’ï¼‰
  
  // å…³è”ä¿¡æ¯
  sourceAssetId?: string;                    // æ¥æºç´ æ ID
  linkedVideoClipId?: string;                // å…³è”çš„è§†é¢‘ç‰‡æ®µ ID
}

interface TimelineAudioState {
  tracks: AudioTrack[];
  masterVolume: number;
  
  // æ“ä½œ
  addTrack: (track: AudioTrack) => void;
  removeTrack: (trackId: string) => void;
  updateTrackVolume: (trackId: string, volume: number) => void;
  toggleMute: (trackId: string) => void;
  toggleSolo: (trackId: string) => void;
}
```

### 5. éŸ³è§†é¢‘åˆ†ç¦»åŠŸèƒ½è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      éŸ³è§†é¢‘åˆ†ç¦»æµç¨‹                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  åŸå§‹è§†é¢‘ç‰‡æ®µ                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ¬ video_001.mp4 (å«éŸ³é¢‘)                                   â”‚   â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚   â”‚
â”‚  â”‚  ğŸ”Š â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â”‚ ç‚¹å‡»"ä¸€é”®åˆ‡å¼€éŸ³è§†é¢‘"                  â”‚
â”‚                              â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  FFmpeg å¤„ç†                                                 â”‚   â”‚
â”‚  â”‚  ffmpeg -i input.mp4 -an output_video.mp4  (æå–è§†é¢‘)       â”‚   â”‚
â”‚  â”‚  ffmpeg -i input.mp4 -vn output_audio.wav  (æå–éŸ³é¢‘)       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  åˆ†ç¦»å                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ¬ video_001_video.mp4 (é™éŸ³)                               â”‚   â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ”Š video_001_audio.wav (ç‹¬ç«‹éŸ³é¢‘)                           â”‚   â”‚
â”‚  â”‚  â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆâ–‡â–†â–…â–„â–ƒâ–‚â–                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6. éŸ³è§†é¢‘åˆ†ç¦» API

```python
# POST /api/timeline/split-audio-video
class SplitAudioVideoRequest(BaseModel):
    clip_id: str           # è§†é¢‘ç‰‡æ®µ ID
    keep_original: bool    # æ˜¯å¦ä¿ç•™åŸå§‹æ–‡ä»¶

class SplitAudioVideoResponse(BaseModel):
    video_clip_id: str     # åˆ†ç¦»åçš„è§†é¢‘ç‰‡æ®µ ID
    audio_track_id: str    # åˆ†ç¦»åçš„éŸ³é¢‘è½¨é“ ID
    video_path: str        # è§†é¢‘æ–‡ä»¶è·¯å¾„
    audio_path: str        # éŸ³é¢‘æ–‡ä»¶è·¯å¾„
    waveform_data: List[float]  # æ³¢å½¢æ•°æ®

# POST /api/timeline/merge-audio-video
class MergeAudioVideoRequest(BaseModel):
    video_clip_id: str     # è§†é¢‘ç‰‡æ®µ ID
    audio_track_id: str    # éŸ³é¢‘è½¨é“ ID

class MergeAudioVideoResponse(BaseModel):
    merged_clip_id: str    # åˆå¹¶åçš„ç‰‡æ®µ ID
    merged_path: str       # åˆå¹¶åçš„æ–‡ä»¶è·¯å¾„
```

### 7. Beatboard é‡æ–°åˆ†æåŠŸèƒ½è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Beatboard é‡æ–°åˆ†ææµç¨‹                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  ç”¨æˆ·ç‚¹å‡»"é‡æ–°åˆ†æ"                                                  â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  é€‰æ‹©åˆ†ææ¨¡å¼                                                â”‚   â”‚
â”‚  â”‚  â—‹ å•åœºæ¬¡åˆ†æ - åªåˆ†æå½“å‰é€‰ä¸­çš„åœºæ¬¡                        â”‚   â”‚
â”‚  â”‚  â—‹ å…¨å±€åˆ†æ - åˆ†ææ‰€æœ‰åœºæ¬¡                                  â”‚   â”‚
â”‚  â”‚  â˜‘ ä¿ç•™æ‰‹åŠ¨é€‰æ‹© - ä¿ç•™ç”¨æˆ·ä¹‹å‰çš„æ‰‹åŠ¨é€‰æ‹©                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  é‡æ–°åˆ†ææ‰§è¡Œ                                                â”‚   â”‚
â”‚  â”‚  1. è·å–æœ€æ–°çš„é¡¹ç›®èµ„äº§åº“                                    â”‚   â”‚
â”‚  â”‚  2. åŸºäºåœºæ¬¡æè¿°å’Œæ ‡ç­¾é‡æ–°æœç´¢                              â”‚   â”‚
â”‚  â”‚  3. æ›´æ–°å€™é€‰ç´ æåˆ—è¡¨                                        â”‚   â”‚
â”‚  â”‚  4. è®¡ç®—ä¸ä¹‹å‰ç»“æœçš„å·®å¼‚                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ˜¾ç¤ºåˆ†æç»“æœ                                                â”‚   â”‚
â”‚  â”‚  åœºæ¬¡ 1: æ–°å¢ 3 ä¸ªå€™é€‰ï¼Œç§»é™¤ 1 ä¸ªå€™é€‰                       â”‚   â”‚
â”‚  â”‚  åœºæ¬¡ 2: æ— å˜åŒ–                                              â”‚   â”‚
â”‚  â”‚  åœºæ¬¡ 3: æ–°å¢ 5 ä¸ªå€™é€‰                                       â”‚   â”‚
â”‚  â”‚  [åº”ç”¨æ›´æ–°] [å–æ¶ˆ]                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8. é‡æ–°åˆ†ææ•°æ®ç»“æ„

```typescript
interface ReanalyzeRequest {
  mode: 'single' | 'global';           // åˆ†ææ¨¡å¼
  sceneId?: string;                    // å•åœºæ¬¡æ¨¡å¼æ—¶çš„åœºæ¬¡ ID
  preserveManualSelections: boolean;   // æ˜¯å¦ä¿ç•™æ‰‹åŠ¨é€‰æ‹©
}

interface ReanalyzeResult {
  sceneId: string;
  previousCandidates: AssetCandidate[];
  newCandidates: AssetCandidate[];
  addedCount: number;
  removedCount: number;
  unchangedCount: number;
}

interface ReanalyzeResponse {
  results: ReanalyzeResult[];
  totalScenesAnalyzed: number;
  processingTime: number;
}
```

## æ–‡ä»¶ç»“æ„

```
frontend/components/Workspace/
â”œâ”€â”€ index.tsx              # ä¸»ç»„ä»¶
â”œâ”€â”€ WorkspaceContext.tsx   # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ TabNavigation.tsx      # Tab å¯¼èˆª
â”œâ”€â”€ ProjectInfoTab/        # ç«‹é¡¹ä¿¡æ¯ Tab
â”‚   â”œâ”€â”€ index.tsx
â”‚   â”œâ”€â”€ BasicInfoSection.tsx
â”‚   â”œâ”€â”€ ScriptSection.tsx
â”‚   â”œâ”€â”€ CharactersSection.tsx
â”‚   â”œâ”€â”€ ScenesSection.tsx
â”‚   â””â”€â”€ ReferencesSection.tsx
â”œâ”€â”€ BeatboardTab.tsx       # Beatboard Tab (åŒ…è£…å™¨)
â”œâ”€â”€ PreviewTab.tsx         # é¢„æ¼”æ¨¡å¼ Tab (åŒ…è£…å™¨)
â””â”€â”€ types.ts               # ç±»å‹å®šä¹‰
```
