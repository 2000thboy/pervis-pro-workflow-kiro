# PreVis PRO 素材处理详细说明

## 🎯 处理后的文件结构

### 📁 你的原始文件
**不会被修改！** 系统会保持你的原始视频文件完全不变。

### 🗂️ 目录结构说明

配置网络盘符后，会在 L: 盘创建以下结构：

```
L:\PreVis_Assets\
├── originals\              # 🎬 原始视频文件
│   ├── video1.mp4          # 你的原始文件，完全不变
│   ├── video2.avi          # 你的原始文件，完全不变
│   └── video3.mov          # 你的原始文件，完全不变
│
├── proxies\                # 🔄 代理文件 (系统自动生成)
│   ├── video1_proxy.mp4    # 低分辨率版本，用于快速预览
│   ├── video2_proxy.mp4    # 低分辨率版本，用于快速预览
│   └── video3_proxy.mp4    # 低分辨率版本，用于快速预览
│
├── thumbnails\             # 🖼️ 缩略图 (系统自动生成)
│   ├── video1_thumb.jpg    # 视频预览图
│   ├── video2_thumb.jpg    # 视频预览图
│   └── video3_thumb.jpg    # 视频预览图
│
└── audio\                  # 🎵 音频文件 (系统自动提取)
    ├── video1_audio.wav    # 提取的音频
    ├── video2_audio.wav    # 提取的音频
    └── video3_audio.wav    # 提取的音频

L:\PreVis_Storage\
├── renders\                # 🎬 渲染输出
│   ├── project1_final.mp4  # 最终剪辑视频
│   └── project2_final.mp4  # 最终剪辑视频
│
├── exports\                # 📄 导出文件
│   ├── script_export.docx  # 导出的剧本
│   ├── beatboard.png       # 导出的BeatBoard
│   └── project_data.json   # 项目数据
│
└── temp\                   # 🗂️ 临时文件
    └── processing\         # 处理过程中的临时文件
```

## 📋 文件处理流程

### 1️⃣ 上传原始文件
```
你的文件: movie.mp4 (1GB)
↓
存储到: L:\PreVis_Assets\originals\movie.mp4
状态: 完全不变，保持原始质量
```

### 2️⃣ 系统自动处理
```
原始文件: L:\PreVis_Assets\originals\movie.mp4
↓ 系统自动生成
├── 代理文件: L:\PreVis_Assets\proxies\movie_proxy.mp4 (100MB, 720p)
├── 缩略图: L:\PreVis_Assets\thumbnails\movie_thumb.jpg (50KB)
├── 音频: L:\PreVis_Assets\audio\movie_audio.wav (50MB)
└── 数据库记录: 文件信息、标签、元数据
```

### 3️⃣ 编辑和渲染
```
编辑时使用: 代理文件 (快速预览)
渲染时使用: 原始文件 (保证质量)
输出到: L:\PreVis_Storage\renders\final_video.mp4
```

## ✅ 重要说明

### 🔒 原始文件安全
- **绝对不会修改你的原始视频文件**
- **不会添加任何后缀或扩展名**
- **不会改变文件内容或质量**
- **原始文件永远保持不变**

### 📝 不会创建 .txt 文件
- 系统不会在你的视频旁边创建 .txt 文件
- 所有元数据和标签信息存储在数据库中
- 文件信息通过数据库管理，不修改原文件

### 🔄 自动生成的文件
系统会自动生成以下文件，但**不会影响原文件**：

1. **代理文件** (.mp4)
   - 低分辨率版本 (通常720p)
   - 用于快速预览和编辑
   - 文件名格式: `原文件名_proxy.mp4`

2. **缩略图** (.jpg)
   - 视频的预览图片
   - 用于快速识别视频内容
   - 文件名格式: `原文件名_thumb.jpg`

3. **音频文件** (.wav)
   - 从视频中提取的音频
   - 用于音频分析和处理
   - 文件名格式: `原文件名_audio.wav`

## 🎬 实际使用示例

### 示例1: 上传单个视频
```
你上传: chase_scene.mp4 (2.5GB, 4K)

系统处理后:
📁 L:\PreVis_Assets\
├── originals\
│   └── chase_scene.mp4           # 原文件，2.5GB，4K，完全不变
├── proxies\
│   └── chase_scene_proxy.mp4     # 代理文件，200MB，720p
├── thumbnails\
│   └── chase_scene_thumb.jpg     # 缩略图，100KB
└── audio\
    └── chase_scene_audio.wav     # 音频，150MB

数据库记录:
- 文件路径: L:\PreVis_Assets\originals\chase_scene.mp4
- 标签: ["动作", "追逐", "城市"]
- 时长: 120秒
- 分辨率: 3840x2160
- 编码: H.264
```

### 示例2: 批量处理多个视频
```
你上传的文件:
- intro.mp4 (500MB)
- action1.avi (1.2GB)  
- dialogue.mov (800MB)

处理后的结构:
📁 L:\PreVis_Assets\
├── originals\              # 原始文件，完全不变
│   ├── intro.mp4           # 500MB，原始质量
│   ├── action1.avi         # 1.2GB，原始质量
│   └── dialogue.mov        # 800MB，原始质量
├── proxies\                # 代理文件，快速预览
│   ├── intro_proxy.mp4     # 50MB，720p
│   ├── action1_proxy.mp4   # 120MB，720p
│   └── dialogue_proxy.mp4  # 80MB，720p
├── thumbnails\             # 缩略图
│   ├── intro_thumb.jpg
│   ├── action1_thumb.jpg
│   └── dialogue_thumb.jpg
└── audio\                  # 提取的音频
    ├── intro_audio.wav
    ├── action1_audio.wav
    └── dialogue_audio.wav
```

## 🔧 配置和使用

### 1. 运行配置工具
```bash
python 配置网络盘符.py
```

### 2. 选择 L: 盘
- 在界面中选择 "L: - 影片参考"
- 点击 "应用配置"

### 3. 上传视频文件
方法1: 直接复制
```
复制你的视频文件到: L:\PreVis_Assets\originals\
```

方法2: 通过系统上传
```
在 PreVis PRO 中使用 "素材管理" 功能上传
```

### 4. 系统自动处理
- 系统会自动检测新文件
- 自动生成代理文件和缩略图
- 自动分析视频内容并打标签
- 所有处理都不会修改原文件

## 💡 最佳实践

### 文件命名建议
```
✅ 好的命名:
- scene01_intro.mp4
- action_chase_downtown.mp4
- dialogue_restaurant.mov

❌ 避免的命名:
- 新建文件夹.mp4
- 视频1.avi
- untitled.mov
```

### 文件格式建议
```
✅ 推荐格式:
- MP4 (H.264) - 最佳兼容性
- MOV (ProRes) - 高质量
- AVI (无损) - 专业用途

⚠️ 需要转换:
- WMV, FLV - 会自动转换为MP4
- MKV - 会保持原格式或转换
```

### 存储空间管理
```
原始文件: 保持高质量，占用较大空间
代理文件: 约为原文件的 5-10%
缩略图: 每个约 50-200KB
音频文件: 约为原文件的 10-20%

总空间需求 ≈ 原文件大小 × 1.3
```

## 🎉 总结

**PreVis PRO 的文件处理原则:**
1. **绝不修改原始文件**
2. **不添加任何后缀或标记**
3. **通过数据库管理元数据**
4. **自动生成辅助文件用于快速处理**
5. **保证原始质量用于最终渲染**

你的视频文件会保持完全原始状态，系统只是创建额外的辅助文件来提高工作效率！