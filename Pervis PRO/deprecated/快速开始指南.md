# PreVis PRO 导出和标签管理功能 - 快速开始指南

## 🚀 5分钟快速体验

### 前提条件
- ✅ 后端服务运行在 `http://localhost:8000`
- ✅ 前端服务运行在 `http://localhost:3001`
- ✅ 已有演示项目数据（Cyberpunk Trailer）

### 方式1: 使用启动器（推荐）

#### 步骤1: 启动PreVis PRO启动器
```bash
python pervis_desktop_launcher.py
```

#### 步骤2: 导出剧本
1. 在项目列表中找到"Cyberpunk Trailer"项目
2. 点击项目卡片上的 **"📤 导出"** 按钮
3. 在弹出的对话框中：
   - 选择"剧本导出" → "DOCX格式"
   - 点击 **"📄 导出剧本"** 按钮
4. 选择保存位置，等待导出完成
5. 用Word打开查看导出的剧本文档

#### 步骤3: 导出BeatBoard
1. 在同一个对话框中：
   - 选择"BeatBoard导出" → "PNG格式"
   - 点击 **"🖼️ 导出BeatBoard"** 按钮
2. 选择保存位置，等待导出完成
3. 用图片查看器打开查看BeatBoard可视化

#### 步骤4: 管理标签
1. 点击项目卡片上的 **"🏷️ 标签"** 按钮
2. 浏览器自动打开标签管理页面
3. 在左侧查看标签层级树
4. 点击任意标签查看详情
5. 使用滑块调整标签权重
6. 更改会自动保存

### 方式2: 使用Web界面

#### 访问标签管理页面
```
http://localhost:3001/tag-management?project=cyberpunk_trailer
```

**功能：**
- 查看完整的标签层级树（7级分类）
- 实时调整标签权重（0-1范围）
- 查看标签详细信息
- 自动保存到后端

#### 访问向量可视化页面
```
http://localhost:3001/vector-visualization
```

**功能：**
- 输入搜索查询测试相似度
- 查看Top-K匹配结果
- 查看相似度分数和分布图
- 查看匹配解释和关键词
- 保存和管理测试案例

### 方式3: 运行演示脚本

```bash
python demo_export_tag_features.py
```

这个脚本会：
- 演示所有导出API调用
- 演示所有标签管理API调用
- 演示所有向量分析API调用
- 显示详细的使用指南

## 📖 详细功能说明

### 1. 剧本导出功能

**支持格式：**
- DOCX（Microsoft Word格式）
- PDF（便携文档格式）

**导出内容：**
- 项目基本信息（标题、概述）
- 完整的Beat列表
- 每个Beat的标签信息
- 元数据和统计信息

**使用场景：**
- 与团队分享剧本
- 打印纸质版本
- 存档备份

### 2. BeatBoard导出功能

**支持格式：**
- PNG（高质量无损）
- JPG（压缩格式）

**导出内容：**
- Beat时间线可视化
- 情绪曲线图
- 标签分布
- 视觉化的故事结构

**自定义选项：**
- 图片尺寸（默认1920x1080）
- 图片质量（默认95%）
- 选择特定的Beats

**使用场景：**
- 演示文稿
- 社交媒体分享
- 项目展示

### 3. 标签管理功能

**核心功能：**
- **层级展示**：7级分类结构（情绪→场景→动作→摄影）
- **权重调整**：0-1范围，影响搜索排序
- **实时保存**：更改立即同步到后端
- **详情查看**：父标签、子标签、顺序等

**标签分类：**
1. 情绪标签（Emotions）
2. 场景标签（Scenes）
3. 动作标签（Actions）
4. 摄影标签（Cinematography）

**使用场景：**
- 优化搜索结果
- 调整标签重要性
- 组织标签结构

### 4. 向量搜索测试功能

**核心功能：**
- **相似度搜索**：基于Gemini Embedding计算
- **匹配解释**：详细说明为什么匹配
- **测试案例**：保存常用搜索查询
- **可视化**：条形图展示相似度分布

**搜索流程：**
1. 输入查询文本（如"赛博朋克城市夜景"）
2. 设置返回结果数量（Top-K）
3. 查看匹配结果和分数
4. 点击结果查看详细解释
5. 保存为测试案例供后续使用

**使用场景：**
- 测试搜索质量
- 调试匹配算法
- 优化标签权重
- 创建回归测试

## 🎯 常见问题

### Q1: 导出按钮点击没反应？
**A:** 检查后端服务是否运行：
```bash
# 检查后端状态
curl http://localhost:8000/api/health
```

### Q2: 标签管理页面打不开？
**A:** 确保前端服务正在运行：
```bash
# 启动前端服务
cd frontend
npm run dev
```

### Q3: 导出的文件在哪里？
**A:** 文件保存在你选择的位置。演示导出的文件在：
```
exports/demo_cyberpunk_trailer_script.docx
exports/demo_cyberpunk_trailer_beatboard.png
```

### Q4: 如何查看已导出的文件？
**A:** 
- DOCX文件：使用Microsoft Word、WPS或LibreOffice打开
- PNG文件：使用任何图片查看器打开

详细说明请查看：`HOW_TO_VIEW_MVP_OUTPUT.md`

### Q5: 标签权重调整后没有保存？
**A:** 检查浏览器控制台是否有错误信息。权重调整会自动保存，如果失败会显示错误提示。

### Q6: 向量搜索没有结果？
**A:** 确保：
- 数据库中有资产数据
- 资产已经生成向量嵌入
- 查询文本不为空

## 📚 更多资源

### 完整文档
- [完成总结](完成总结.md) - 项目完成情况总结
- [前端集成报告](FRONTEND_INTEGRATION_COMPLETION_REPORT.md) - 前端开发详情
- [后端完成报告](ENHANCED_EXPORT_TAG_COMPLETION_REPORT.md) - 后端开发详情
- [MVP验证报告](MVP_EXPORT_TAG_VALIDATION_REPORT.md) - 功能验证结果

### 技术文档
- [需求文档](.kiro/specs/enhanced-export-and-tag-management/requirements.md)
- [设计文档](.kiro/specs/enhanced-export-and-tag-management/design.md)
- [任务列表](.kiro/specs/enhanced-export-and-tag-management/tasks.md)

### API文档
- 导出API：`/api/export/*`
- 标签API：`/api/tags/*`
- 向量API：`/api/vector/*`

## 💡 使用技巧

### 技巧1: 批量导出
如果需要导出多个项目，可以：
1. 在启动器中逐个点击导出
2. 或使用API批量调用

### 技巧2: 优化搜索结果
通过调整标签权重来优化搜索：
1. 提高重要标签的权重（接近1.0）
2. 降低次要标签的权重（接近0.0）
3. 测试搜索结果是否改善

### 技巧3: 创建测试案例
为常用搜索创建测试案例：
1. 执行搜索并验证结果
2. 点击"保存为测试案例"
3. 后续可快速重复测试

### 技巧4: 导出高质量图片
导出BeatBoard时：
- 使用PNG格式获得最佳质量
- 设置较大的尺寸（如2560x1440）
- 质量设置为95%或更高

## 🎉 开始使用

现在你已经了解了所有功能，开始体验吧！

1. **启动启动器**：`python pervis_desktop_launcher.py`
2. **点击导出按钮**：导出你的第一个剧本
3. **打开标签管理**：调整标签权重
4. **测试向量搜索**：体验智能搜索

祝你使用愉快！🚀

---

**需要帮助？** 查看完整文档或运行演示脚本：
```bash
python demo_export_tag_features.py
```
