# MVP验证系统需求文档

## 介绍

PreVis PRO已完成P0工程稳定性修复，现在需要建立一套完整的MVP验证系统，确保系统随时处于"可演示、可交付、可信任"的状态。这不是功能扩展，而是建立产品交付的最后一公里保障。

## 术语表

- **Sanity Check**: 快速验证系统基本可用性的自动化检查
- **MVP Demo**: 标准化的演示项目，用于展示系统核心价值
- **Production Ready**: 系统达到可以被外部用户信任使用的状态
- **Freeze Mode**: 功能冻结模式，只允许稳定性和演示相关的改动

## 需求

### 需求1: 系统健康自检机制

**用户故事**: 作为系统维护者，我需要能够快速验证系统是否处于可用状态，以便在演示前确保系统稳定性。

#### 验收标准

1. WHEN 执行健康检查脚本 THEN 系统应在30秒内完成所有关键组件检查
2. WHEN 后端服务异常 THEN 检查脚本应立即报告失败并退出
3. WHEN 前端服务异常 THEN 检查脚本应立即报告失败并退出
4. WHEN 数据库连接异常 THEN 检查脚本应立即报告失败并退出
5. WHEN 向量系统维度不一致 THEN 检查脚本应报告维度错误
6. WHEN 所有检查通过 THEN 系统应输出"SANITY CHECK PASS"确认信息

### 需求2: 标准化演示项目

**用户故事**: 作为产品演示者，我需要一个标准化的演示项目，能够在5分钟内展示系统的核心价值和完整工作流程。

#### 验收标准

1. WHEN 打开演示项目 THEN 系统应显示完整的剧本内容和项目信息
2. WHEN 执行剧本分析 THEN 系统应生成标准化的Beat分解结果
3. WHEN 选择任意Beat THEN 系统应推荐相关的素材内容
4. WHEN 查看推荐素材 THEN 系统应显示缩略图、标签和匹配理由
5. WHEN 播放素材预览 THEN 系统应能够正常播放代理文件
6. WHERE 演示模式启用 THEN 系统应隐藏技术细节，突出用户价值

### 需求3: 稳定性报告生成

**用户故事**: 作为项目负责人，我需要获得系统当前稳定性状态的标准化报告，以便向团队和用户证明系统的可靠性。

#### 验收标准

1. WHEN 生成稳定性报告 THEN 报告应包含P0问题修复状态确认
2. WHEN 检查并发处理 THEN 报告应确认所有阻塞操作已异步化
3. WHEN 检查状态闭环 THEN 报告应确认轮询机制和状态接口完整性
4. WHEN 检查向量一致性 THEN 报告应确认384维度校验机制有效
5. WHEN 检查素材分层 THEN 报告应确认文件存储结构清晰完整
6. WHEN 报告生成完成 THEN 系统应提供PASS/FAIL的明确结论

### 需求4: 开发模式控制

**用户故事**: 作为开发团队成员，我需要明确的开发约束和指导原则，确保不会破坏当前的稳定状态。

#### 验收标准

1. WHEN 进入冻结模式 THEN 系统应拒绝任何新功能开发请求
2. WHEN 进行代码修改 THEN 修改必须明确指出文件名、函数名和改动原因
3. WHEN 引入新依赖 THEN 系统应拒绝并提示当前为稳定性优先阶段
4. WHEN 修改核心架构 THEN 系统应拒绝并维持本地单机架构
5. WHEN 扩展技术栈 THEN 系统应拒绝并保持当前技术选型
6. WHERE 允许的修改范围 THEN 仅限于P0稳定性、Sanity检查和Demo优化

### 需求5: 演示素材管理

**用户故事**: 作为演示准备者，我需要一套精心准备的演示素材，能够完整展示系统从剧本分析到素材推荐的全流程。

#### 验收标准

1. WHEN 准备演示素材 THEN 应包含完整的剧本、Beat和标签数据
2. WHEN 素材包含视频文件 THEN 应提供高质量的代理文件和缩略图
3. WHEN 设计演示流程 THEN 应覆盖剧本导入、分析、搜索、预览的完整链路
4. WHEN 演示项目加载 THEN 所有素材应在本地可用，无需网络依赖
5. WHEN 执行演示操作 THEN 每个步骤应在3秒内响应完成
6. WHERE 演示内容选择 THEN 应选择视觉冲击力强、易于理解的题材

### 需求6: 系统可信度验证

**用户故事**: 作为潜在用户，我需要通过实际使用验证系统的可靠性和实用性，确保它能够满足真实的工作需求。

#### 验收标准

1. WHEN 系统连续运行 THEN 应能稳定工作超过2小时无崩溃
2. WHEN 处理多个项目 THEN 系统应保持响应速度和数据一致性
3. WHEN 执行复杂操作 THEN 系统应提供清晰的进度反馈和错误处理
4. WHEN 用户进行误操作 THEN 系统应优雅处理并提供有用的错误信息
5. WHEN 系统资源不足 THEN 应提供明确的资源限制提示
6. WHERE 系统性能表现 THEN API响应时间应保持在500ms以内

### 需求7: 交付文档完整性

**用户故事**: 作为系统接收方，我需要完整的文档和指导材料，能够独立理解、部署和使用系统。

#### 验收标准

1. WHEN 提供部署文档 THEN 应包含详细的环境要求和安装步骤
2. WHEN 提供使用指南 THEN 应包含完整的操作流程和最佳实践
3. WHEN 提供故障排除 THEN 应包含常见问题和解决方案
4. WHEN 提供系统架构说明 THEN 应清晰描述各组件关系和数据流
5. WHEN 提供演示指导 THEN 应包含标准演示脚本和话术建议
6. WHERE 文档更新维护 THEN 应与系统状态保持同步更新

### 需求8: 版本控制和发布管理

**用户故事**: 作为版本管理者，我需要明确的版本标识和发布流程，确保每个版本都经过充分验证。

#### 验收标准

1. WHEN 创建新版本 THEN 应包含完整的Sanity Check验证
2. WHEN 标记版本状态 THEN 应明确区分开发版、稳定版和演示版
3. WHEN 发布版本 THEN 应包含完整的演示项目和文档
4. WHEN 版本回退 THEN 应能快速恢复到上一个稳定状态
5. WHEN 版本比较 THEN 应能清晰识别功能变更和稳定性改进
6. WHERE 版本命名规则 THEN 应采用语义化版本号体系