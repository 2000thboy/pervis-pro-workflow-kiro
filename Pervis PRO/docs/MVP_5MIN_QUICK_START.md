# Pervis PRO - 5分钟 MVP 快速验证指南

> 产品经理视角的完整用户流程图 + 快速验证步骤

---

## 一、产品完整流程图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Pervis PRO 用户旅程                                │
└─────────────────────────────────────────────────────────────────────────────┘

【启动阶段】
┌──────────────┐
│  双击启动器   │ ──→ 一键启动.bat
└──────┬───────┘
       │
       ▼
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  启动后端    │ ──→ │  启动前端    │ ──→ │  打开浏览器   │
│  端口 8000   │     │  端口 3001   │     │ localhost:3001│
└──────────────┘     └──────────────┘     └──────┬───────┘
                                                  │
═══════════════════════════════════════════════════════════════════════════════

【首页】Landing Page
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│   ┌─────────────────┐              ┌────────────────────────────────────┐  │
│   │  最近项目列表    │              │         PreVis Pro                 │  │
│   │  ┌───────────┐  │              │                                    │  │
│   │  │ 项目卡片1  │  │              │   [+ 新建项目] ← 点击进入向导      │  │
│   │  └───────────┘  │              │                                    │  │
│   │  ┌───────────┐  │              │   "AI驱动的影视预览制作工具"        │  │
│   │  │ 项目卡片2  │  │              │                                    │  │
│   │  └───────────┘  │              └────────────────────────────────────┘  │
│   └─────────────────┘                                                       │
│                                                                             │
│   底部: [1.剧本分析] → [2.故事板] → [3.时间线]                              │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       │ 点击 [+ 新建项目]
       ▼
═══════════════════════════════════════════════════════════════════════════════

【项目创建向导】ProjectWizard (6步)

┌─────────────────────────────────────────────────────────────────────────────┐
│ Step 1: 基本信息                                                    [1/6]  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   项目名称: [________________] [AI生成] ← 点击自动生成创意名称              │
│                                                                             │
│   项目类型: [短片] [长片] [广告] [MV] [自定义]                              │
│              ↑                                                              │
│              选择一个类型                                                   │
│                                                                             │
│   时长: [====●=====] 5 分钟                                                 │
│                                                                             │
│   画幅: [16:9 ▼]  帧率: [24fps ▼]  分辨率: [1080p ▼]                       │
│                                                                             │
│   Logline: [________________] [AI生成] ← 点击自动生成一句话概要             │
│                                                                             │
│                                              [上一步] [下一步 →]            │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       │ 点击 [下一步]
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│ Step 2: 剧本导入                                                    [2/6]  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                     拖拽文件到此处上传                               │  │
│   │                   支持 TXT/PDF/DOCX/FDX                             │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   或者粘贴剧本内容:                                                         │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │ INT. 咖啡馆 - 日                                                    │  │
│   │                                                                     │  │
│   │ 小明坐在窗边...                                                     │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   [✨ AI智能解析] [生成示例剧本] ← Demo演示时点击这个                       │
│                                                                             │
│   解析结果: 3个场次 | 2个角色 | 预计5分钟                                   │
│                                              [← 上一步] [下一步 →]          │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       │ 点击 [下一步]
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│ Step 3: 角色设定                                                    [3/6]  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │ [头像] 小明                                                         │  │
│   │        标签: 主角 | 青年 | 男                                       │  │
│   │        [✨生成小传] [🖼生成人设图] [👁视觉标签] [✏编辑] [🗑删除]     │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │ [头像] 小红                                                         │  │
│   │        标签: 配角 | 青年 | 女                                       │  │
│   │        [✨生成小传] [🖼生成人设图] [👁视觉标签] [✏编辑] [🗑删除]     │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   [+ 添加角色]                                                              │
│                                              [← 上一步] [下一步 →]          │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       │ 点击 [下一步]
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│ Step 4: 场次规划                                                    [4/6]  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   时长分布: [████████░░░░░░░░░░░░] 总计 5分钟                               │
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │ [1] INT. 咖啡馆 - 日                                                │  │
│   │     地点: 咖啡馆 | 时间: 日 | 时长: 60秒 | 角色: 小明, 小红          │  │
│   │     [🖼生成概念图] [👁视觉标签] [✏编辑] [🗑删除]                     │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │ [2] EXT. 街道 - 日                                                  │  │
│   │     地点: 街道 | 时间: 日 | 时长: 45秒 | 角色: 小明                  │  │
│   │     [🖼生成概念图] [👁视觉标签] [✏编辑] [🗑删除]                     │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   [+ 添加场次]                                                              │
│                                              [← 上一步] [下一步 →]          │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       │ 点击 [下一步]
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│ Step 5: 参考资料 (可选)                                             [5/6]  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                     拖拽图片到此处上传                               │  │
│   │                   支持 JPG/PNG/GIF/WebP                             │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   角色参考 (1):                                                             │
│   ┌────────┐                                                               │
│   │ [图片] │ character_ref.jpg | 角色参考 ▼                               │
│   └────────┘                                                               │
│                                                                             │
│   场景参考 (1):                                                             │
│   ┌────────┐                                                               │
│   │ [图片] │ scene_ref.jpg | 场景参考 ▼                                   │
│   └────────┘                                                               │
│                                                                             │
│   💡 提示: 此步骤可跳过，直接点击下一步                                     │
│                                              [← 上一步] [下一步 →]          │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       │ 点击 [下一步]
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│ Step 6: 确认提交                                                    [6/6]  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   完成度: [████████████████████] 100%                                       │
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │ 项目预览                                                            │  │
│   │ ─────────────────────────────────────────────────────────────────── │  │
│   │ 🎬 城市边缘                                                         │  │
│   │ 类型: 短片 | 时长: 5分钟 | 16:9 | 24fps | 1080p                     │  │
│   │                                                                     │  │
│   │ "一个孤独的程序员在深夜的咖啡馆遇见了改变他人生的神秘女子"           │  │
│   │                                                                     │  │
│   │ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐                        │  │
│   │ │ 3场次  │ │ 2角色  │ │ 2参考  │ │ 5分钟  │                        │  │
│   │ └────────┘ └────────┘ └────────┘ └────────┘                        │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│   AI 校验结果:                                                              │
│   ✅ 项目名称已填写                                                         │
│   ✅ 项目类型已选择                                                         │
│   ✅ 剧本已解析                                                             │
│   ✅ 角色信息完整                                                           │
│   ✅ 场次规划完成                                                           │
│                                                                             │
│                                              [← 上一步] [✅ 创建项目]       │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       │ 点击 [创建项目]
       ▼
═══════════════════════════════════════════════════════════════════════════════

【工作流程】Analysis → Board → Timeline

┌─────────────────────────────────────────────────────────────────────────────┐
│ 侧边栏                    主工作区                                          │
├──────────────┬──────────────────────────────────────────────────────────────┤
│              │                                                              │
│ PreVis Pro   │  Analysis 阶段 (剧本分析)                                    │
│              │  ─────────────────────────────────────────────────────────── │
│ ┌──────────┐ │                                                              │
│ │当前项目  │ │  ┌─────────────────────────────────────────────────────────┐│
│ │城市边缘  │ │  │ 剧本内容                              │ 角色列表        ││
│ └──────────┘ │  │ ─────────────────────────────────────│─────────────────││
│              │  │ INT. 咖啡馆 - 日                      │ 小明 (主角)     ││
│ ─────────── │  │                                       │ 小红 (配角)     ││
│ 工具        │  │ 小明坐在窗边，面前放着一杯拿铁...     │                 ││
│              │  │                                       │                 ││
│ [📄 剧本]   │  │ 小明                                  │                 ││
│ [📋 故事板] │  │ （自言自语）                          │                 ││
│ [🎬 时间线] │  │ 今天的代码终于写完了...               │                 ││
│              │  └─────────────────────────────────────────────────────────┘│
│ ─────────── │                                                              │
│ 资源        │                                    [下一步: 故事板 →]        │
│ [📁 素材库] │                                                              │
│              │                                                              │
│ ─────────── │                                                              │
│ [⚙️ 设置]   │                                                              │
│ [🚪 退出]   │                                                              │
└──────────────┴──────────────────────────────────────────────────────────────┘
       │
       │ 点击 [下一步: 故事板]
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    Board 阶段 (故事板)                                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  场次 1: INT. 咖啡馆 - 日                                                   │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐ ┌────────────┐              │
│  │ [Beat 1]   │ │ [Beat 2]   │ │ [Beat 3]   │ │ [Beat 4]   │              │
│  │ ┌────────┐ │ │ ┌────────┐ │ │ ┌────────┐ │ │ ┌────────┐ │              │
│  │ │ 缩略图 │ │ │ │ 缩略图 │ │ │ │ 缩略图 │ │ │ │ 缩略图 │ │              │
│  │ └────────┘ │ │ └────────┘ │ │ └────────┘ │ │ └────────┘ │              │
│  │ 小明入场   │ │ 点咖啡     │ │ 看手机     │ │ 小红出现   │              │
│  │ 15s        │ │ 10s        │ │ 20s        │ │ 15s        │              │
│  └────────────┘ └────────────┘ └────────────┘ └────────────┘              │
│                                                                             │
│  场次 2: EXT. 街道 - 日                                                     │
│  ┌────────────┐ ┌────────────┐                                             │
│  │ [Beat 5]   │ │ [Beat 6]   │                                             │
│  │ ┌────────┐ │ │ ┌────────┐ │                                             │
│  │ │ 缩略图 │ │ │ │ 缩略图 │ │                                             │
│  │ └────────┘ │ │ └────────┘ │                                             │
│  │ 走出咖啡馆 │ │ 看天空     │                                             │
│  │ 20s        │ │ 25s        │                                             │
│  └────────────┘ └────────────┘                                             │
│                                                                             │
│                                              [下一步: 时间线 →]             │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       │ 点击 [下一步: 时间线]
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    Timeline 阶段 (时间线)                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  预览窗口                                                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                                                                     │   │
│  │                        [视频预览画面]                               │   │
│  │                                                                     │   │
│  │                           ▶ 00:00 / 05:00                          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  时间线                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ V1 │████████│████│████████│██████│████████│██████████│              │   │
│  │ V2 │        │    │        │      │        │          │              │   │
│  │ A1 │▓▓▓▓▓▓▓▓│▓▓▓▓│▓▓▓▓▓▓▓▓│▓▓▓▓▓▓│▓▓▓▓▓▓▓▓│▓▓▓▓▓▓▓▓▓▓│              │   │
│  │ A2 │        │    │        │      │        │          │              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│  │ 0:00      1:00      2:00      3:00      4:00      5:00              │   │
│                                                                             │
│                                                        [🎬 导出]           │
└─────────────────────────────────────────────────────────────────────────────┘
       │
       │ 点击 [导出]
       ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                         导出完成                                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ✅ 导出成功!                                                              │
│                                                                             │
│   文件: 城市边缘_previs.mp4                                                 │
│   位置: exports/城市边缘_previs.mp4                                         │
│   格式: MP4 | 1920x1080 | 24fps                                            │
│   时长: 5分钟                                                               │
│                                                                             │
│   [打开文件夹] [继续编辑] [返回首页]                                        │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 二、5分钟 MVP 快速验证步骤

### 准备工作 (30秒)
```bash
# 1. 双击启动
一键启动.bat

# 2. 等待服务启动 (约20秒)
# 3. 浏览器自动打开 http://localhost:3001
```

### Step 1: 创建项目 (1分钟)

| 操作 | 说明 |
|------|------|
| 1. 点击 [+ 新建项目] | 进入项目创建向导 |
| 2. 点击 [AI生成] 按钮 | 自动生成项目名称 |
| 3. 选择项目类型 [短片] | 选择任意类型 |
| 4. 点击 Logline 旁的 [AI生成] | 自动生成一句话概要 |
| 5. 点击 [下一步] | 进入剧本导入 |

### Step 2: 导入剧本 (1分钟)

| 操作 | 说明 |
|------|------|
| 1. 点击 [生成示例剧本] | 自动填充示例剧本 |
| 2. 点击 [✨ AI智能解析] | 等待解析完成 |
| 3. 查看解析结果 | 确认场次和角色数量 |
| 4. 点击 [下一步] | 进入角色设定 |

### Step 3: 角色设定 (30秒)

| 操作 | 说明 |
|------|------|
| 1. 查看自动识别的角色 | 确认角色列表 |
| 2. (可选) 点击 [✨] 生成人物小传 | AI 生成角色背景 |
| 3. 点击 [下一步] | 进入场次规划 |

### Step 4: 场次规划 (30秒)

| 操作 | 说明 |
|------|------|
| 1. 查看自动识别的场次 | 确认场次列表 |
| 2. (可选) 调整场次时长 | 拖动或输入 |
| 3. 点击 [下一步] | 进入参考资料 |

### Step 5: 参考资料 (跳过)

| 操作 | 说明 |
|------|------|
| 1. 直接点击 [下一步] | 跳过此步骤 |

### Step 6: 确认创建 (30秒)

| 操作 | 说明 |
|------|------|
| 1. 查看项目预览 | 确认信息正确 |
| 2. 查看 AI 校验结果 | 确认全部通过 |
| 3. 点击 [✅ 创建项目] | 创建项目 |

### Step 7: 工作流程 (1分钟)

| 操作 | 说明 |
|------|------|
| 1. 进入 Analysis 阶段 | 查看剧本分析 |
| 2. 点击 [下一步: 故事板] | 进入 Board |
| 3. 查看故事板卡片 | 确认 Beat 分布 |
| 4. 点击 [下一步: 时间线] | 进入 Timeline |
| 5. 查看时间线 | 确认轨道布局 |
| 6. 点击 [导出] | 完成 MVP |

---

## 三、关键按钮功能验证清单

### 项目创建向导 (ProjectWizard)

| 步骤 | 按钮 | 功能 | API |
|------|------|------|-----|
| Step1 | [AI生成] 项目名 | 生成创意名称 | 本地/API |
| Step1 | [AI生成] Logline | 生成一句话概要 | 本地/API |
| Step2 | [生成示例剧本] | 填充示例剧本 | 本地 |
| Step2 | [AI智能解析] | 解析剧本 | /api/wizard/parse-script |
| Step3 | [✨] 生成小传 | 生成角色背景 | /api/wizard/generate-content |
| Step3 | [🖼] 生成人设图 | 生成角色图片 | /api/image-generation/character |
| Step4 | [🖼] 生成概念图 | 生成场景图片 | /api/image-generation/scene |
| Step6 | [创建项目] | 创建项目 | /api/wizard/create-project |

### 主应用 (App)

| 页面 | 按钮 | 功能 |
|------|------|------|
| 首页 | [+ 新建项目] | 打开向导 |
| 首页 | 项目卡片 | 打开项目 |
| 侧边栏 | [剧本] | 切换到 Analysis |
| 侧边栏 | [故事板] | 切换到 Board |
| 侧边栏 | [时间线] | 切换到 Timeline |
| 顶部 | [下一步] | 进入下一阶段 |
| Timeline | [导出] | 导出视频 |

---

## 四、环境配置状态

```
┌─────────────────────────────────────────────────────────────────┐
│ 配置项                    │ 状态   │ 说明                       │
├───────────────────────────┼────────┼────────────────────────────┤
│ GEMINI_API_KEY            │ ✅ 已配置 │ AI 文本生成              │
│ REPLICATE_API_TOKEN       │ ✅ 已配置 │ AI 图片生成              │
│ OLLAMA_BASE_URL           │ ✅ 已配置 │ 本地 AI (需启动 Ollama)  │
│ LLM_PROVIDER              │ ollama │ 当前使用本地模型           │
└─────────────────────────────────────────────────────────────────┘
```

---

## 五、常见问题

### Q: 后端服务启动失败？
```bash
# 检查端口占用
netstat -ano | findstr :8000

# 手动启动后端
cd "Pervis PRO/backend"
py director_main.py
```

### Q: AI 功能不工作？
1. 检查 Ollama 是否启动: `ollama serve`
2. 检查模型是否下载: `ollama list`
3. 如果没有模型: `ollama pull qwen2.5:7b`

### Q: 图片生成失败？
1. 检查 REPLICATE_API_TOKEN 是否有效
2. 检查网络连接
3. 查看后端日志

---

**MVP 验证完成标准:**
- [x] 能够创建新项目
- [x] 能够导入/生成剧本
- [x] 能够解析剧本获取角色和场次
- [x] 能够进入 Analysis → Board → Timeline 流程
- [x] 能够导出视频
