# Pervis PRO å®Œæ•´ç³»ç»Ÿæµç¨‹å›¾

## ğŸ“Š ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              PERVIS PRO ç³»ç»Ÿæ¶æ„                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   ç”¨æˆ·è¾“å…¥   â”‚â”€â”€â”€â–¶â”‚  é¡¹ç›®å‘å¯¼   â”‚â”€â”€â”€â–¶â”‚  æ•…äº‹æ¿    â”‚â”€â”€â”€â–¶â”‚  æ—¶é—´çº¿     â”‚      â”‚
â”‚  â”‚  (å‰§æœ¬/ç´ æ) â”‚    â”‚  (Wizard)   â”‚    â”‚  (Board)   â”‚    â”‚ (Timeline)  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                 â”‚                  â”‚                  â”‚              â”‚
â”‚         â–¼                 â–¼                  â–¼                  â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                        AI Agent åä½œå±‚                               â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚  â”‚Script  â”‚ â”‚Directorâ”‚ â”‚  Art   â”‚ â”‚Market  â”‚ â”‚  PM    â”‚ â”‚System  â”‚ â”‚      â”‚
â”‚  â”‚  â”‚Agent   â”‚ â”‚Agent   â”‚ â”‚Agent   â”‚ â”‚Agent   â”‚ â”‚Agent   â”‚ â”‚Agent   â”‚ â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                                                                      â”‚
â”‚         â–¼                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                        æ ¸å¿ƒæœåŠ¡å±‚                                    â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚
â”‚  â”‚  â”‚æœç´¢æœåŠ¡  â”‚ â”‚åµŒå…¥æœåŠ¡  â”‚ â”‚æ¸²æŸ“æœåŠ¡  â”‚ â”‚å¯¼å‡ºæœåŠ¡  â”‚ â”‚ç¼“å­˜æœåŠ¡  â”‚  â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                                                                      â”‚
â”‚         â–¼                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚   è§†é¢‘è¾“å‡º   â”‚    â”‚  æ–‡æ¡£è¾“å‡º   â”‚    â”‚  NLEå·¥ç¨‹    â”‚                        â”‚
â”‚  â”‚  (MP4/MOV)  â”‚    â”‚ (PDF/DOCX)  â”‚    â”‚(FCPXML/EDL) â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹ï¼ˆä»ç”¨æˆ·è¾“å…¥åˆ°è¾“å‡ºï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é˜¶æ®µ 1: ç”¨æˆ·è¾“å…¥                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ğŸ‘¤ ç”¨æˆ·                                                                            â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â”œâ”€â”€â–¶ ğŸ“ è¾“å…¥å‰§æœ¬æ–‡æœ¬                                                              â”‚
â”‚    â”‚    â””â”€â”€ æ ¼å¼: æ ‡å‡†å‰§æœ¬æ ¼å¼ (INT./EXT. åœºæ™¯æ ‡é¢˜, å¯¹ç™½, åŠ¨ä½œæè¿°)                   â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â”œâ”€â”€â–¶ ğŸ“ ä¸Šä¼ ç´ ææ–‡ä»¶                                                              â”‚
â”‚    â”‚    â”œâ”€â”€ è§†é¢‘: MP4, MOV, AVI, MKV                                                â”‚
â”‚    â”‚    â”œâ”€â”€ å›¾ç‰‡: JPG, PNG, WEBP                                                    â”‚
â”‚    â”‚    â””â”€â”€ éŸ³é¢‘: MP3, WAV, AAC                                                     â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â””â”€â”€â–¶ âš™ï¸ è®¾ç½®é¡¹ç›®å‚æ•°                                                              â”‚
â”‚         â”œâ”€â”€ é¡¹ç›®ç±»å‹: çŸ­ç‰‡/å¹¿å‘Š/MV/çºªå½•ç‰‡                                            â”‚
â”‚         â”œâ”€â”€ ç›®æ ‡æ—¶é•¿: 1-60 åˆ†é’Ÿ                                                      â”‚
â”‚         â””â”€â”€ é£æ ¼åå¥½: ç°ä»£/å¤å¤/ç§‘å¹»/æ–‡è‰º                                            â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é˜¶æ®µ 2: é¡¹ç›®å‘å¯¼ (Project Wizard)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ğŸ“‹ WizardStep1_BasicInfo.tsx                                                       â”‚
â”‚    â”‚  â””â”€â”€ æ”¶é›†: é¡¹ç›®åç§°, ç±»å‹, æ—¶é•¿, é£æ ¼                                           â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   ğŸ“ WizardStep2_Script.tsx                                                          â”‚
â”‚    â”‚  â”œâ”€â”€ ç”¨æˆ·ç²˜è´´/ä¸Šä¼ å‰§æœ¬                                                          â”‚
â”‚    â”‚  â””â”€â”€ è°ƒç”¨ Script_Agent è§£æ                                                     â”‚
â”‚    â”‚       â”‚                                                                         â”‚
â”‚    â”‚       â–¼                                                                         â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚    â”‚  â”‚ Script_Agent (script_agent.py)                              â”‚               â”‚
â”‚    â”‚  â”‚  â”œâ”€â”€ parse_script() â†’ è§£æåœºæ¬¡ã€å¯¹ç™½ã€åŠ¨ä½œ                   â”‚               â”‚
â”‚    â”‚  â”‚  â”œâ”€â”€ extract_characters() â†’ æå–è§’è‰²åˆ—è¡¨                     â”‚               â”‚
â”‚    â”‚  â”‚  â”œâ”€â”€ estimate_duration() â†’ ä¼°ç®—æ—¶é•¿                          â”‚               â”‚
â”‚    â”‚  â”‚  â””â”€â”€ generate_logline() â†’ ç”Ÿæˆä¸€å¥è¯æ¦‚è¦                     â”‚               â”‚
â”‚    â”‚  â”‚                                                              â”‚               â”‚
â”‚    â”‚  â”‚  è¾“å‡º: ScriptParseResult                                     â”‚               â”‚
â”‚    â”‚  â”‚   â”œâ”€â”€ scenes: [{scene_id, heading, location, time_of_day}]  â”‚               â”‚
â”‚    â”‚  â”‚   â”œâ”€â”€ characters: [{name, role, description}]               â”‚               â”‚
â”‚    â”‚  â”‚   â”œâ”€â”€ total_scenes: int                                      â”‚               â”‚
â”‚    â”‚  â”‚   â”œâ”€â”€ total_characters: int                                  â”‚               â”‚
â”‚    â”‚  â”‚   â””â”€â”€ estimated_duration: float (ç§’)                         â”‚               â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   ğŸ‘¥ WizardStep3_Characters.tsx                                                      â”‚
â”‚    â”‚  â”œâ”€â”€ æ˜¾ç¤º AI æå–çš„è§’è‰²åˆ—è¡¨                                                     â”‚
â”‚    â”‚  â”œâ”€â”€ ç”¨æˆ·å¯ç¼–è¾‘/æ·»åŠ /åˆ é™¤è§’è‰²                                                   â”‚
â”‚    â”‚  â””â”€â”€ è°ƒç”¨ Art_Agent ç”Ÿæˆè§†è§‰æè¿°                                                â”‚
â”‚    â”‚       â”‚                                                                         â”‚
â”‚    â”‚       â–¼                                                                         â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚    â”‚  â”‚ Art_Agent (art_agent.py)                                    â”‚               â”‚
â”‚    â”‚  â”‚  â”œâ”€â”€ generate_visual_description() â†’ è§’è‰²è§†è§‰æè¿°            â”‚               â”‚
â”‚    â”‚  â”‚  â””â”€â”€ suggest_reference_images() â†’ å‚è€ƒå›¾å»ºè®®                 â”‚               â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   ğŸ¬ WizardStep4_Scenes.tsx                                                          â”‚
â”‚    â”‚  â”œâ”€â”€ æ˜¾ç¤ºåœºæ¬¡åˆ—è¡¨å’Œæ—¶é•¿åˆ†é…                                                     â”‚
â”‚    â”‚  â”œâ”€â”€ ç”¨æˆ·è°ƒæ•´åœºæ¬¡é¡ºåºå’Œæ—¶é•¿                                                     â”‚
â”‚    â”‚  â””â”€â”€ è°ƒç”¨ Storyboard_Agent ç”Ÿæˆæœç´¢è¯                                           â”‚
â”‚    â”‚       â”‚                                                                         â”‚
â”‚    â”‚       â–¼                                                                         â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚    â”‚  â”‚ Storyboard_Agent (storyboard_agent.py)                      â”‚               â”‚
â”‚    â”‚  â”‚  â”œâ”€â”€ generate_search_terms() â†’ ä¸ºæ¯ä¸ªåœºæ¬¡ç”Ÿæˆæœç´¢å…³é”®è¯      â”‚               â”‚
â”‚    â”‚  â”‚  â””â”€â”€ suggest_shot_types() â†’ å»ºè®®é•œå¤´ç±»å‹                     â”‚               â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   ğŸ–¼ï¸ WizardStep5_References.tsx                                                      â”‚
â”‚    â”‚  â”œâ”€â”€ ç”¨æˆ·ä¸Šä¼ å‚è€ƒç´ æ                                                           â”‚
â”‚    â”‚  â””â”€â”€ ç´ æè‡ªåŠ¨ç´¢å¼•åˆ°ç´ æåº“                                                       â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   âœ… WizardStep6_Confirm.tsx                                                         â”‚
â”‚       â”œâ”€â”€ æ˜¾ç¤ºé¡¹ç›®æ‘˜è¦                                                               â”‚
â”‚       â”œâ”€â”€ è°ƒç”¨ Director_Agent å®¡æ ¸                                                   â”‚
â”‚       â”‚    â”‚                                                                         â”‚
â”‚       â”‚    â–¼                                                                         â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚       â”‚  â”‚ Director_Agent (director_agent.py)                          â”‚            â”‚
â”‚       â”‚  â”‚  â”œâ”€â”€ review() â†’ å®¡æ ¸é¡¹ç›®å®Œæ•´æ€§                               â”‚            â”‚
â”‚       â”‚  â”‚  â”œâ”€â”€ check_consistency() â†’ æ£€æŸ¥ä¸€è‡´æ€§                        â”‚            â”‚
â”‚       â”‚  â”‚  â””â”€â”€ suggest_improvements() â†’ æ”¹è¿›å»ºè®®                       â”‚            â”‚
â”‚       â”‚  â”‚                                                              â”‚            â”‚
â”‚       â”‚  â”‚  è¾“å‡º: ReviewResult                                          â”‚            â”‚
â”‚       â”‚  â”‚   â”œâ”€â”€ status: approved/suggestions/rejected                 â”‚            â”‚
â”‚       â”‚  â”‚   â”œâ”€â”€ passed_checks: [æ£€æŸ¥é¡¹åˆ—è¡¨]                            â”‚            â”‚
â”‚       â”‚  â”‚   â””â”€â”€ suggestions: [æ”¹è¿›å»ºè®®åˆ—è¡¨]                            â”‚            â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚       â”‚                                                                              â”‚
â”‚       â”œâ”€â”€ è°ƒç”¨ Market_Agent å¸‚åœºåˆ†æ                                                 â”‚
â”‚       â”‚    â”‚                                                                         â”‚
â”‚       â”‚    â–¼                                                                         â”‚
â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚       â”‚  â”‚ Market_Agent (market_agent.py)                              â”‚            â”‚
â”‚       â”‚  â”‚  â”œâ”€â”€ analyze_market() â†’ å¸‚åœºå®šä½åˆ†æ                         â”‚            â”‚
â”‚       â”‚  â”‚  â”œâ”€â”€ identify_audience() â†’ ç›®æ ‡å—ä¼—è¯†åˆ«                      â”‚            â”‚
â”‚       â”‚  â”‚  â””â”€â”€ suggest_channels() â†’ å‘è¡Œæ¸ é“å»ºè®®                       â”‚            â”‚
â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚       â”‚                                                                              â”‚
â”‚       â””â”€â”€ è°ƒç”¨ PM_Agent è®°å½•ç‰ˆæœ¬                                                     â”‚
â”‚            â”‚                                                                         â”‚
â”‚            â–¼                                                                         â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚          â”‚ PM_Agent (pm_agent.py)                                      â”‚            â”‚
â”‚          â”‚  â”œâ”€â”€ record_version() â†’ è®°å½•å†…å®¹ç‰ˆæœ¬                         â”‚            â”‚
â”‚          â”‚  â”œâ”€â”€ get_version_history() â†’ è·å–ç‰ˆæœ¬å†å²                    â”‚            â”‚
â”‚          â”‚  â””â”€â”€ compare_versions() â†’ ç‰ˆæœ¬å¯¹æ¯”                           â”‚            â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


```
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é˜¶æ®µ 3: ç´ æå¤„ç†ä¸ç´¢å¼•                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ğŸ“ ç´ æä¸Šä¼                                                                         â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Asset Router (routers/assets.py)                                             â”‚   â”‚
â”‚   â”‚  POST /api/assets/upload                                                     â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ æ¥æ”¶æ–‡ä»¶                                                               â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ éªŒè¯æ ¼å¼                                                               â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ä¿å­˜åˆ° storage/assets/                                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Video Preprocessor (services/video_preprocessor.py)                          â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ extract_metadata() â†’ æå–è§†é¢‘å…ƒæ•°æ® (æ—¶é•¿, åˆ†è¾¨ç‡, å¸§ç‡)                 â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ generate_thumbnail() â†’ ç”Ÿæˆç¼©ç•¥å›¾                                       â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ generate_proxy() â†’ ç”Ÿæˆä»£ç†æ–‡ä»¶ (ä½åˆ†è¾¨ç‡é¢„è§ˆ)                          â”‚   â”‚
â”‚   â”‚  â””â”€â”€ extract_audio() â†’ æå–éŸ³é¢‘è½¨é“                                          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Keyframe Extractor (services/keyframe_extractor.py)                          â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ extract_keyframes() â†’ æå–å…³é”®å¸§                                        â”‚   â”‚
â”‚   â”‚  â”‚    â”œâ”€â”€ åœºæ™¯å˜åŒ–æ£€æµ‹                                                       â”‚   â”‚
â”‚   â”‚  â”‚    â”œâ”€â”€ è¿åŠ¨åˆ†æ                                                           â”‚   â”‚
â”‚   â”‚  â”‚    â””â”€â”€ äº®åº¦/å¯¹æ¯”åº¦åˆ†æ                                                    â”‚   â”‚
â”‚   â”‚  â””â”€â”€ ä¿å­˜åˆ° data/keyframes/                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Embedding Service (services/ollama_embedding.py)                             â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ embed() â†’ ç”Ÿæˆæ–‡æœ¬åµŒå…¥å‘é‡                                              â”‚   â”‚
â”‚   â”‚  â”‚    â””â”€â”€ ä½¿ç”¨ Ollama nomic-embed-text æ¨¡å‹                                  â”‚   â”‚
â”‚   â”‚  â”‚                                                                           â”‚   â”‚
â”‚   â”‚  â””â”€â”€ è¾“å‡º: List[float] (768ç»´å‘é‡)                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ CLIP Embedding (services/clip_embedding.py)                                  â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ embed_image() â†’ ç”Ÿæˆå›¾åƒåµŒå…¥å‘é‡                                        â”‚   â”‚
â”‚   â”‚  â”‚    â””â”€â”€ ä½¿ç”¨ CLIP ViT-B/32 æ¨¡å‹                                            â”‚   â”‚
â”‚   â”‚  â”‚                                                                           â”‚   â”‚
â”‚   â”‚  â””â”€â”€ è¾“å‡º: List[float] (512ç»´å‘é‡)                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Vector Store (services/milvus_store.py)                                      â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ insert() â†’ å­˜å‚¨å‘é‡                                                     â”‚   â”‚
â”‚   â”‚  â”‚    â”œâ”€â”€ segment_id: ç‰‡æ®µID                                                 â”‚   â”‚
â”‚   â”‚  â”‚    â”œâ”€â”€ video_id: è§†é¢‘ID                                                   â”‚   â”‚
â”‚   â”‚  â”‚    â”œâ”€â”€ embedding: å‘é‡æ•°æ®                                                â”‚   â”‚
â”‚   â”‚  â”‚    â”œâ”€â”€ tags: æ ‡ç­¾å…ƒæ•°æ®                                                   â”‚   â”‚
â”‚   â”‚  â”‚    â””â”€â”€ description: æè¿°æ–‡æœ¬                                              â”‚   â”‚
â”‚   â”‚  â”‚                                                                           â”‚   â”‚
â”‚   â”‚  â””â”€â”€ å­˜å‚¨ä½ç½®: å†…å­˜ (MemoryVideoStore) æˆ– Milvus                             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Keyframe Store (services/keyframe_store.py)                                  â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ save_keyframe() â†’ ä¿å­˜å…³é”®å¸§æ•°æ®                                        â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ save_keyframes_batch() â†’ æ‰¹é‡ä¿å­˜                                       â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ update_embedding() â†’ æ›´æ–°è§†è§‰åµŒå…¥                                       â”‚   â”‚
â”‚   â”‚  â””â”€â”€ search_by_embedding() â†’ é€šè¿‡åµŒå…¥æœç´¢                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   ğŸ“Š æ•°æ®åº“å­˜å‚¨ (database.py)                                                        â”‚
â”‚    â”œâ”€â”€ assets è¡¨: ç´ æåŸºæœ¬ä¿¡æ¯                                                       â”‚
â”‚    â”œâ”€â”€ asset_segments è¡¨: ç´ æç‰‡æ®µ                                                   â”‚
â”‚    â”œâ”€â”€ asset_vectors è¡¨: å‘é‡æ•°æ®                                                    â”‚
â”‚    â”œâ”€â”€ asset_tags è¡¨: æ ‡ç­¾å…³è”                                                       â”‚
â”‚    â””â”€â”€ keyframes è¡¨: å…³é”®å¸§æ•°æ®                                                      â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


```
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é˜¶æ®µ 4: ç´ ææœç´¢ä¸åŒ¹é…                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ğŸ” æœç´¢è¯·æ±‚                                                                        â”‚
â”‚    â”‚  æ¥æº: åœºæ¬¡åˆ†æç”Ÿæˆçš„æœç´¢è¯ / ç”¨æˆ·æ‰‹åŠ¨æœç´¢                                       â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Search Router (routers/search.py)                                            â”‚   â”‚
â”‚   â”‚  POST /api/search/hybrid                                                     â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ query: æœç´¢æ–‡æœ¬                                                        â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ mode: text/visual/hybrid                                               â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ top_k: è¿”å›æ•°é‡                                                        â”‚   â”‚
â”‚   â”‚   â””â”€â”€ filters: æ ‡ç­¾è¿‡æ»¤                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Hybrid Search Service (services/search_service.py)                           â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚   â”‚  â”‚   æ–‡æœ¬æœç´¢      â”‚    â”‚   è§†è§‰æœç´¢      â”‚    â”‚   æ ‡ç­¾æœç´¢      â”‚          â”‚   â”‚
â”‚   â”‚  â”‚ (Text Search)   â”‚    â”‚ (Visual Search) â”‚    â”‚ (Tag Search)    â”‚          â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚   â”‚           â”‚                      â”‚                      â”‚                    â”‚   â”‚
â”‚   â”‚           â–¼                      â–¼                      â–¼                    â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚   â”‚  â”‚                    ç»“æœèåˆ (Score Fusion)                      â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”œâ”€â”€ æ–‡æœ¬ç›¸ä¼¼åº¦æƒé‡: 0.4                                        â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”œâ”€â”€ è§†è§‰ç›¸ä¼¼åº¦æƒé‡: 0.4                                        â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â””â”€â”€ æ ‡ç­¾åŒ¹é…æƒé‡: 0.2                                          â”‚         â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚
â”‚   â”‚           â”‚                                                                  â”‚   â”‚
â”‚   â”‚           â–¼                                                                  â”‚   â”‚
â”‚   â”‚  è¾“å‡º: SearchResult[]                                                        â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ asset_id: ç´ æID                                                       â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ score: ç»¼åˆç›¸ä¼¼åº¦ (0-1)                                                â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ thumbnail: ç¼©ç•¥å›¾è·¯å¾„                                                  â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ duration: æ—¶é•¿                                                         â”‚   â”‚
â”‚   â”‚   â””â”€â”€ tags: æ ‡ç­¾åˆ—è¡¨                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é˜¶æ®µ 5: æ•…äº‹æ¿ç¼–è¾‘ (BeatBoard)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ğŸ¬ StepBeatBoard.tsx                                                               â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â”œâ”€â”€ æ˜¾ç¤º Beat åˆ—è¡¨ (æ¯ä¸ª Beat å¯¹åº”ä¸€ä¸ªé•œå¤´/åœºæ™¯ç‰‡æ®µ)                               â”‚
â”‚    â”‚    â”œâ”€â”€ Beat æ ‡é¢˜                                                                â”‚
â”‚    â”‚    â”œâ”€â”€ Beat å†…å®¹æè¿°                                                            â”‚
â”‚    â”‚    â”œâ”€â”€ æƒ…ç»ªæ ‡ç­¾ (emotion_tags)                                                  â”‚
â”‚    â”‚    â”œâ”€â”€ åœºæ™¯æ ‡ç­¾ (scene_tags)                                                    â”‚
â”‚    â”‚    â”œâ”€â”€ åŠ¨ä½œæ ‡ç­¾ (action_tags)                                                   â”‚
â”‚    â”‚    â””â”€â”€ é•œå¤´æ ‡ç­¾ (cinematography_tags)                                           â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â”œâ”€â”€ ç´ æåŒ¹é…é¢æ¿                                                                  â”‚
â”‚    â”‚    â”œâ”€â”€ æ˜¾ç¤ºæœç´¢ç»“æœ                                                             â”‚
â”‚    â”‚    â”œâ”€â”€ ç”¨æˆ·é€‰æ‹©/æ‹–æ‹½ç´ æåˆ° Beat                                                 â”‚
â”‚    â”‚    â””â”€â”€ æ”¯æŒå¤šå€™é€‰ç´ æ                                                           â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â””â”€â”€ ç”¨æˆ·æ“ä½œ                                                                      â”‚
â”‚         â”œâ”€â”€ ç¼–è¾‘ Beat å†…å®¹                                                           â”‚
â”‚         â”œâ”€â”€ è°ƒæ•´ Beat é¡ºåº                                                           â”‚
â”‚         â”œâ”€â”€ æ·»åŠ /åˆ é™¤ Beat                                                           â”‚
â”‚         â””â”€â”€ ä¸º Beat åˆ†é…ç´ æ                                                         â”‚
â”‚                                                                                      â”‚
â”‚   ğŸ“Š æ•°æ®å­˜å‚¨                                                                        â”‚
â”‚    â””â”€â”€ beats è¡¨: Beat æ•°æ®                                                           â”‚
â”‚         â”œâ”€â”€ id, project_id, order_index                                              â”‚
â”‚         â”œâ”€â”€ content, emotion_tags, scene_tags                                        â”‚
â”‚         â”œâ”€â”€ action_tags, cinematography_tags                                         â”‚
â”‚         â”œâ”€â”€ duration, main_asset_id                                                  â”‚
â”‚         â””â”€â”€ user_notes                                                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


```
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é˜¶æ®µ 6: æ—¶é—´çº¿ç¼–è¾‘ (Timeline)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ğŸï¸ StepTimeline.tsx                                                                â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â”œâ”€â”€ æ—¶é—´çº¿è§†å›¾                                                                    â”‚
â”‚    â”‚    â”œâ”€â”€ è§†é¢‘è½¨é“ (Video Track)                                                   â”‚
â”‚    â”‚    â”œâ”€â”€ éŸ³é¢‘è½¨é“ (Audio Track)                                                   â”‚
â”‚    â”‚    â””â”€â”€ æ—¶é—´åˆ»åº¦ (Time Ruler)                                                    â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â”œâ”€â”€ ç‰‡æ®µæ“ä½œ                                                                      â”‚
â”‚    â”‚    â”œâ”€â”€ æ‹–æ‹½è°ƒæ•´ä½ç½®                                                             â”‚
â”‚    â”‚    â”œâ”€â”€ è°ƒæ•´å…¥å‡ºç‚¹ (trim_start, trim_end)                                        â”‚
â”‚    â”‚    â”œâ”€â”€ è°ƒæ•´éŸ³é‡ (volume)                                                        â”‚
â”‚    â”‚    â””â”€â”€ æ·»åŠ è½¬åœº (transition_type, transition_duration)                          â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â””â”€â”€ é¢„è§ˆæ’­æ”¾                                                                      â”‚
â”‚         â””â”€â”€ å®æ—¶é¢„è§ˆæ—¶é—´çº¿æ•ˆæœ                                                       â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Timeline Service (services/timeline_service.py)                              â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ create_timeline() â†’ åˆ›å»ºæ—¶é—´è½´                                          â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ add_clip() â†’ æ·»åŠ ç‰‡æ®µ                                                   â”‚   â”‚
â”‚   â”‚  â”‚    è¾“å…¥: ClipData                                                         â”‚   â”‚
â”‚   â”‚  â”‚     â”œâ”€â”€ asset_id: ç´ æID                                                  â”‚   â”‚
â”‚   â”‚  â”‚     â”œâ”€â”€ start_time: æ—¶é—´è½´å¼€å§‹æ—¶é—´                                        â”‚   â”‚
â”‚   â”‚  â”‚     â”œâ”€â”€ end_time: æ—¶é—´è½´ç»“æŸæ—¶é—´                                          â”‚   â”‚
â”‚   â”‚  â”‚     â”œâ”€â”€ trim_start: ç´ æå…¥ç‚¹                                              â”‚   â”‚
â”‚   â”‚  â”‚     â”œâ”€â”€ trim_end: ç´ æå‡ºç‚¹                                                â”‚   â”‚
â”‚   â”‚  â”‚     â”œâ”€â”€ volume: éŸ³é‡ (0-2)                                                â”‚   â”‚
â”‚   â”‚  â”‚     â”œâ”€â”€ transition_type: è½¬åœºç±»å‹                                         â”‚   â”‚
â”‚   â”‚  â”‚     â””â”€â”€ order_index: é¡ºåºç´¢å¼•                                             â”‚   â”‚
â”‚   â”‚  â”‚                                                                           â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ update_clip() â†’ æ›´æ–°ç‰‡æ®µ                                                â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ delete_clip() â†’ åˆ é™¤ç‰‡æ®µ                                                â”‚   â”‚
â”‚   â”‚  â”œâ”€â”€ reorder_clips() â†’ é‡æ’ç‰‡æ®µ                                              â”‚   â”‚
â”‚   â”‚  â””â”€â”€ validate_timeline() â†’ éªŒè¯æ—¶é—´è½´å®Œæ•´æ€§                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   ğŸ“Š æ•°æ®å­˜å‚¨                                                                        â”‚
â”‚    â”œâ”€â”€ timelines è¡¨: æ—¶é—´è½´æ•°æ®                                                      â”‚
â”‚    â”‚    â”œâ”€â”€ id, project_id, name, duration                                           â”‚
â”‚    â”‚    â””â”€â”€ created_at, updated_at                                                   â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â””â”€â”€ clips è¡¨: ç‰‡æ®µæ•°æ®                                                            â”‚
â”‚         â”œâ”€â”€ id, timeline_id, asset_id                                                â”‚
â”‚         â”œâ”€â”€ start_time, end_time, trim_start, trim_end                               â”‚
â”‚         â”œâ”€â”€ volume, is_muted, audio_fade_in, audio_fade_out                          â”‚
â”‚         â”œâ”€â”€ transition_type, transition_duration                                     â”‚
â”‚         â””â”€â”€ order_index, clip_metadata                                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           é˜¶æ®µ 7: å¯¼å‡ºè¾“å‡º                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ğŸ“¤ ExportDialog.tsx                                                                â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â”œâ”€â”€ å¯¼å‡ºæ¨¡å¼é€‰æ‹©                                                                  â”‚
â”‚    â”‚    â”œâ”€â”€ analysis: é¡¹ç›®æ–‡æ¡£å¯¼å‡º                                                   â”‚
â”‚    â”‚    â”œâ”€â”€ board: æ•…äº‹æ¿å¯¼å‡º                                                        â”‚
â”‚    â”‚    â””â”€â”€ timeline: æ—¶é—´çº¿å¯¼å‡º                                                     â”‚
â”‚    â”‚                                                                                 â”‚
â”‚    â–¼                                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ“„ æ–‡æ¡£å¯¼å‡º (analysis æ¨¡å¼)                                                  â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  Export Router: POST /api/export/script                                      â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â–¼                                                                          â”‚   â”‚
â”‚   â”‚  Document Exporter (services/document_exporter.py)                           â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ export_script_pdf() â†’ PDF æ ¼å¼                                         â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ ä½¿ç”¨ WeasyPrint ç”Ÿæˆä¸“ä¸šæ’ç‰ˆ                                      â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ export_script_docx() â†’ Word æ ¼å¼                                       â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ ä½¿ç”¨ python-docx ç”Ÿæˆå¯ç¼–è¾‘æ–‡æ¡£                                   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ export_script_markdown() â†’ Markdown æ ¼å¼                               â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  è¾“å‡ºæ–‡ä»¶: exports/script_{project_id}.{pdf|docx|md}                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ–¼ï¸ æ•…äº‹æ¿å¯¼å‡º (board æ¨¡å¼)                                                   â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  Export Router: POST /api/export/beatboard                                   â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â–¼                                                                          â”‚   â”‚
â”‚   â”‚  Image Exporter (services/image_exporter.py)                                 â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ export_beatboard_image() â†’ å•å¼ å›¾ç‰‡                                    â”‚   â”‚
â”‚   â”‚   â”‚    â”œâ”€â”€ æ ¼å¼: PNG / JPG                                                   â”‚   â”‚
â”‚   â”‚   â”‚    â”œâ”€â”€ åˆ†è¾¨ç‡: è‡ªå®šä¹‰ (é»˜è®¤ 1920x1080)                                   â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ å åŠ : Beat æ ‡é¢˜ã€å†…å®¹ã€æ ‡ç­¾                                       â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â””â”€â”€ (å¾…å®ç°) export_contact_sheet() â†’ è”ç³»è¡¨                               â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  è¾“å‡ºæ–‡ä»¶: exports/beatboard_{project_id}_{beat_id}.{png|jpg}                â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


```
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ¬ è§†é¢‘å¯¼å‡º (timeline æ¨¡å¼ - video)                                          â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  Export Router: POST /api/export/timeline/video                              â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â–¼                                                                          â”‚   â”‚
â”‚   â”‚  Enhanced Render Service (services/render_service_enhanced.py)               â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚   â”‚  â”‚ æ¸²æŸ“é€‰é¡¹ (RenderOptions)                                        â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”œâ”€â”€ format: MP4 / MOV / WebM / ProRes                          â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”œâ”€â”€ resolution: 720p / 1080p / 2K / 4K                         â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”‚    â”œâ”€â”€ 720p:  1280 x 720                                     â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”‚    â”œâ”€â”€ 1080p: 1920 x 1080                                    â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”‚    â”œâ”€â”€ 2K:    2560 x 1440                                    â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”‚    â””â”€â”€ 4K:    3840 x 2160                                    â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”œâ”€â”€ framerate: 23.976 / 24 / 25 / 29.97 / 30 / 50 / 60        â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”œâ”€â”€ quality: low / medium / high / ultra                       â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”‚    â”œâ”€â”€ low:    CRF 28, preset fast,   bitrate 1Mbps          â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”‚    â”œâ”€â”€ medium: CRF 23, preset medium, bitrate 3Mbps          â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”‚    â”œâ”€â”€ high:   CRF 18, preset slow,   bitrate 8Mbps          â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â”‚    â””â”€â”€ ultra:  CRF 15, preset slower, bitrate 15Mbps         â”‚         â”‚   â”‚
â”‚   â”‚  â”‚  â””â”€â”€ audio_bitrate: 128 / 192 / 256 / 320 kbps                  â”‚         â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  æ¸²æŸ“æµç¨‹:                                                                   â”‚   â”‚
â”‚   â”‚   1. check_render_requirements() â†’ æ£€æŸ¥å‰ç½®æ¡ä»¶                              â”‚   â”‚
â”‚   â”‚   2. start_render() â†’ åˆ›å»ºæ¸²æŸ“ä»»åŠ¡                                           â”‚   â”‚
â”‚   â”‚   3. _execute_render_enhanced() â†’ åå°æ‰§è¡Œ                                   â”‚   â”‚
â”‚   â”‚      â”‚                                                                       â”‚   â”‚
â”‚   â”‚      â”œâ”€â”€ éå†æ—¶é—´çº¿ç‰‡æ®µ                                                      â”‚   â”‚
â”‚   â”‚      â”‚    â””â”€â”€ _transcode_segment() â†’ è½¬ç æ¯ä¸ªç‰‡æ®µ                            â”‚   â”‚
â”‚   â”‚      â”‚         â”œâ”€â”€ FFmpeg å‰ªåˆ‡                                               â”‚   â”‚
â”‚   â”‚      â”‚         â”œâ”€â”€ åˆ†è¾¨ç‡ç¼©æ”¾                                                â”‚   â”‚
â”‚   â”‚      â”‚         â””â”€â”€ ç¼–ç è½¬æ¢                                                  â”‚   â”‚
â”‚   â”‚      â”‚                                                                       â”‚   â”‚
â”‚   â”‚      â”œâ”€â”€ concat_videos() â†’ æ‹¼æ¥æ‰€æœ‰ç‰‡æ®µ                                      â”‚   â”‚
â”‚   â”‚      â”‚                                                                       â”‚   â”‚
â”‚   â”‚      â””â”€â”€ æ¸…ç†ä¸´æ—¶æ–‡ä»¶                                                        â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  è¿›åº¦è¿½è¸ª:                                                                   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ GET /api/export/timeline/video/status/{task_id}                        â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ WebSocket å®æ—¶æ¨é€ (EventService)                                      â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ExportProgress.tsx æ˜¾ç¤ºè¿›åº¦æ¡                                          â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  è¾“å‡ºæ–‡ä»¶: storage/renders/render_{timestamp}_{task_id}.{mp4|mov|webm}       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ›ï¸ NLE å·¥ç¨‹å¯¼å‡º (timeline æ¨¡å¼ - nle)                                        â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  Export Router: POST /api/export/nle                                         â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â–¼                                                                          â”‚   â”‚
â”‚   â”‚  NLE Exporter (services/nle_exporter.py)                                     â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ export_fcpxml() â†’ FCPXML 1.9 æ ¼å¼                                      â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ å…¼å®¹: Final Cut Pro, Premiere Pro, DaVinci Resolve               â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â””â”€â”€ export_edl_cmx3600() â†’ CMX3600 EDL æ ¼å¼                                â”‚   â”‚
â”‚   â”‚        â””â”€â”€ é€šç”¨æ ¼å¼ï¼Œå…¼å®¹å¤§å¤šæ•° NLE è½¯ä»¶                                     â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  å¯¼å‡ºå†…å®¹:                                                                   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ç‰‡æ®µå…¥å‡ºç‚¹ (in/out points)                                             â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ æ—¶é•¿ä¿¡æ¯                                                               â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ è½¨é“ä¿¡æ¯                                                               â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ç´ ææ–‡ä»¶ç›¸å¯¹è·¯å¾„å¼•ç”¨                                                   â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  è¾“å‡ºæ–‡ä»¶: exports/nle_{project_id}.{fcpxml|edl}                             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


## ğŸ¤– AI Agent è¯¦ç»†è¯´æ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              AI Agent åä½œæ¶æ„                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ­ Script_Agent (å‰§æœ¬è§£æ)                                                   â”‚   â”‚
â”‚   â”‚  æ–‡ä»¶: services/agents/script_agent.py                                       â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  åŠŸèƒ½:                                                                       â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ parse_script(script_text) â†’ ScriptParseResult                          â”‚   â”‚
â”‚   â”‚   â”‚    â”œâ”€â”€ è§£æåœºæ¬¡æ ‡é¢˜ (INT./EXT. åœºæ™¯ - æ—¶é—´)                              â”‚   â”‚
â”‚   â”‚   â”‚    â”œâ”€â”€ æå–å¯¹ç™½å’ŒåŠ¨ä½œæè¿°                                                â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ è¯†åˆ«è§’è‰²åç§°                                                      â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ extract_characters() â†’ List[Character]                                 â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ estimate_duration() â†’ float (ç§’)                                       â”‚   â”‚
â”‚   â”‚   â””â”€â”€ generate_logline() â†’ str                                               â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  AI æ¨¡å‹: Ollama qwen2.5:7b                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ¬ Director_Agent (å¯¼æ¼”å®¡æ ¸)                                                 â”‚   â”‚
â”‚   â”‚  æ–‡ä»¶: services/agents/director_agent.py                                     â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  åŠŸèƒ½:                                                                       â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ review(result, task_type, project_id) â†’ ReviewResult                   â”‚   â”‚
â”‚   â”‚   â”‚    â”œâ”€â”€ å®¡æ ¸ logline è´¨é‡                                                 â”‚   â”‚
â”‚   â”‚   â”‚    â”œâ”€â”€ å®¡æ ¸åœºæ¬¡å®Œæ•´æ€§                                                    â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ å®¡æ ¸è§’è‰²ä¸€è‡´æ€§                                                    â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â””â”€â”€ è¾“å‡º: ReviewResult                                                     â”‚   â”‚
â”‚   â”‚        â”œâ”€â”€ status: approved / suggestions / rejected                         â”‚   â”‚
â”‚   â”‚        â”œâ”€â”€ passed_checks: [é€šè¿‡çš„æ£€æŸ¥é¡¹]                                     â”‚   â”‚
â”‚   â”‚        â””â”€â”€ suggestions: [æ”¹è¿›å»ºè®®]                                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ¨ Art_Agent (ç¾æœ¯è®¾è®¡)                                                      â”‚   â”‚
â”‚   â”‚  æ–‡ä»¶: services/agents/art_agent.py                                          â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  åŠŸèƒ½:                                                                       â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ generate_visual_description(entity_type, entity_name) â†’ str            â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ ä¸ºè§’è‰²/åœºæ™¯ç”Ÿæˆè§†è§‰æè¿°                                           â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â””â”€â”€ suggest_reference_images() â†’ List[str]                                 â”‚   â”‚
â”‚   â”‚        â””â”€â”€ å»ºè®®å‚è€ƒå›¾ç‰‡å…³é”®è¯                                                â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ“Š Market_Agent (å¸‚åœºåˆ†æ)                                                   â”‚   â”‚
â”‚   â”‚  æ–‡ä»¶: services/agents/market_agent.py                                       â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  åŠŸèƒ½:                                                                       â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ analyze_market(project_id, project_data) â†’ MarketAnalysisResult        â”‚   â”‚
â”‚   â”‚   â”‚    â”œâ”€â”€ åˆ†æç›®æ ‡å—ä¼—                                                      â”‚   â”‚
â”‚   â”‚   â”‚    â”œâ”€â”€ å¸‚åœºå®šä½å»ºè®®                                                      â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ å‘è¡Œæ¸ é“æ¨è                                                      â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â””â”€â”€ è¾“å‡º: MarketAnalysisResult                                             â”‚   â”‚
â”‚   â”‚        â”œâ”€â”€ audience: {primary_age_range, interests, platforms}               â”‚   â”‚
â”‚   â”‚        â”œâ”€â”€ market_position: str                                              â”‚   â”‚
â”‚   â”‚        â””â”€â”€ distribution_channels: [æ¸ é“åˆ—è¡¨]                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ“‹ PM_Agent (é¡¹ç›®ç®¡ç†)                                                       â”‚   â”‚
â”‚   â”‚  æ–‡ä»¶: services/agents/pm_agent.py                                           â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  åŠŸèƒ½:                                                                       â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ record_version(project_id, content_type, content, source) â†’ Version    â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ è®°å½•å†…å®¹ç‰ˆæœ¬å†å²                                                  â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ get_version_history(project_id, content_type) â†’ List[Version]          â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â””â”€â”€ get_version_display_info() â†’ VersionDisplayInfo                        â”‚   â”‚
â”‚   â”‚        â”œâ”€â”€ version_count: int                                                â”‚   â”‚
â”‚   â”‚        â””â”€â”€ current_version: str                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ”§ System_Agent (ç³»ç»Ÿæ ¡éªŒ)                                                   â”‚   â”‚
â”‚   â”‚  æ–‡ä»¶: services/agents/system_agent.py                                       â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  åŠŸèƒ½:                                                                       â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ check_tag_consistency(tags) â†’ ConsistencyResult                        â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ æ£€æŸ¥æ ‡ç­¾æ˜¯å¦å­˜åœ¨çŸ›ç›¾ (å¦‚ "å®¤å†…" + "å®¤å¤–")                         â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ validate_before_export(project_id, project_data) â†’ ValidationResult    â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ å¯¼å‡ºå‰å®Œæ•´æ€§æ ¡éªŒ                                                  â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â””â”€â”€ è¾“å‡º: ConsistencyResult                                                â”‚   â”‚
â”‚   â”‚        â”œâ”€â”€ is_consistent: bool                                               â”‚   â”‚
â”‚   â”‚        â””â”€â”€ conflicts: [å†²çªè¯¦æƒ…]                                             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸï¸ Storyboard_Agent (æ•…äº‹æ¿)                                                 â”‚   â”‚
â”‚   â”‚  æ–‡ä»¶: services/agents/storyboard_agent.py                                   â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  åŠŸèƒ½:                                                                       â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ generate_search_terms(scene_name, script) â†’ List[str]                  â”‚   â”‚
â”‚   â”‚   â”‚    â””â”€â”€ ä¸ºåœºæ¬¡ç”Ÿæˆç´ ææœç´¢å…³é”®è¯                                          â”‚   â”‚
â”‚   â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â””â”€â”€ suggest_shot_types() â†’ List[str]                                       â”‚   â”‚
â”‚   â”‚        â””â”€â”€ å»ºè®®é•œå¤´ç±»å‹ (ç‰¹å†™/ä¸­æ™¯/è¿œæ™¯ç­‰)                                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


## ğŸ“ æ–‡ä»¶ç»“æ„ä¸æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              é¡¹ç›®æ–‡ä»¶ç»“æ„                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  Pervis PRO/                                                                         â”‚
â”‚  â”‚                                                                                   â”‚
â”‚  â”œâ”€â”€ backend/                          # åç«¯æœåŠ¡                                    â”‚
â”‚  â”‚   â”œâ”€â”€ routers/                      # API è·¯ç”±                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ ai.py                     # AI ç›¸å…³ API                                 â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ assets.py                 # ç´ æç®¡ç† API                                â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ export.py                 # å¯¼å‡º API                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ search.py                 # æœç´¢ API                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ timeline.py               # æ—¶é—´çº¿ API                                  â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ wizard.py                 # é¡¹ç›®å‘å¯¼ API                                â”‚
â”‚  â”‚   â”‚   â””â”€â”€ keyframes.py              # å…³é”®å¸§ API                                  â”‚
â”‚  â”‚   â”‚                                                                               â”‚
â”‚  â”‚   â”œâ”€â”€ services/                     # ä¸šåŠ¡æœåŠ¡                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ agents/                   # AI Agent æœåŠ¡                               â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ script_agent.py       # å‰§æœ¬è§£æ                                    â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ director_agent.py     # å¯¼æ¼”å®¡æ ¸                                    â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ art_agent.py          # ç¾æœ¯è®¾è®¡                                    â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ market_agent.py       # å¸‚åœºåˆ†æ                                    â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ pm_agent.py           # é¡¹ç›®ç®¡ç†                                    â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ system_agent.py       # ç³»ç»Ÿæ ¡éªŒ                                    â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ storyboard_agent.py   # æ•…äº‹æ¿                                      â”‚
â”‚  â”‚   â”‚   â”‚                                                                           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ ollama_embedding.py       # æ–‡æœ¬åµŒå…¥æœåŠ¡                                â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ clip_embedding.py         # å›¾åƒåµŒå…¥æœåŠ¡                                â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ milvus_store.py           # å‘é‡å­˜å‚¨                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ search_service.py         # æ··åˆæœç´¢æœåŠ¡                                â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ timeline_service.py       # æ—¶é—´çº¿æœåŠ¡                                  â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ render_service.py         # æ¸²æŸ“æœåŠ¡ (åŸºç¡€ç‰ˆ)                           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ render_service_enhanced.py # æ¸²æŸ“æœåŠ¡ (å¢å¼ºç‰ˆ)                          â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ document_exporter.py      # æ–‡æ¡£å¯¼å‡º                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ image_exporter.py         # å›¾ç‰‡å¯¼å‡º                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ nle_exporter.py           # NLE å·¥ç¨‹å¯¼å‡º                                â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ keyframe_extractor.py     # å…³é”®å¸§æå–                                  â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ keyframe_store.py         # å…³é”®å¸§å­˜å‚¨                                  â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ video_preprocessor.py     # è§†é¢‘é¢„å¤„ç†                                  â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ ffmpeg_wrapper.py         # FFmpeg å°è£…                                 â”‚
â”‚  â”‚   â”‚   â””â”€â”€ cache_manager.py          # ç¼“å­˜ç®¡ç†                                    â”‚
â”‚  â”‚   â”‚                                                                               â”‚
â”‚  â”‚   â”œâ”€â”€ models/                       # æ•°æ®æ¨¡å‹                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ keyframe.py               # å…³é”®å¸§æ¨¡å‹                                  â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ asset_tags.py             # ç´ ææ ‡ç­¾æ¨¡å‹                                â”‚
â”‚  â”‚   â”‚   â””â”€â”€ ...                                                                     â”‚
â”‚  â”‚   â”‚                                                                               â”‚
â”‚  â”‚   â”œâ”€â”€ database.py                   # æ•°æ®åº“é…ç½®å’Œæ¨¡å‹                            â”‚
â”‚  â”‚   â””â”€â”€ main.py                       # FastAPI åº”ç”¨å…¥å£                            â”‚
â”‚  â”‚                                                                                   â”‚
â”‚  â”œâ”€â”€ frontend/                         # å‰ç«¯åº”ç”¨                                    â”‚
â”‚  â”‚   â”œâ”€â”€ components/                                                                 â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ ProjectWizard/            # é¡¹ç›®å‘å¯¼ç»„ä»¶                                â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx             # å‘å¯¼ä¸»ç»„ä»¶                                  â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ WizardStep1_BasicInfo.tsx                                           â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ WizardStep2_Script.tsx                                              â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ WizardStep3_Characters.tsx                                          â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ WizardStep4_Scenes.tsx                                              â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ WizardStep5_References.tsx                                          â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ WizardStep6_Confirm.tsx                                             â”‚
â”‚  â”‚   â”‚   â”‚                                                                           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ Export/                   # å¯¼å‡ºç»„ä»¶                                    â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ ExportDialog.tsx      # å¯¼å‡ºå¯¹è¯æ¡†                                  â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ ExportProgress.tsx    # å¯¼å‡ºè¿›åº¦                                    â”‚
â”‚  â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts                # å¯¼å‡º API                                    â”‚
â”‚  â”‚   â”‚   â”‚   â””â”€â”€ types.ts              # ç±»å‹å®šä¹‰                                    â”‚
â”‚  â”‚   â”‚   â”‚                                                                           â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ StepAnalysis.tsx          # åˆ†æé˜¶æ®µ                                    â”‚
â”‚  â”‚   â”‚   â”œâ”€â”€ StepBeatBoard.tsx         # æ•…äº‹æ¿é˜¶æ®µ                                  â”‚
â”‚  â”‚   â”‚   â””â”€â”€ StepTimeline.tsx          # æ—¶é—´çº¿é˜¶æ®µ                                  â”‚
â”‚  â”‚   â”‚                                                                               â”‚
â”‚  â”‚   â””â”€â”€ App.tsx                       # åº”ç”¨ä¸»ç»„ä»¶                                  â”‚
â”‚  â”‚                                                                                   â”‚
â”‚  â”œâ”€â”€ storage/                          # å­˜å‚¨ç›®å½•                                    â”‚
â”‚  â”‚   â”œâ”€â”€ assets/                       # åŸå§‹ç´ æ                                    â”‚
â”‚  â”‚   â”œâ”€â”€ thumbnails/                   # ç¼©ç•¥å›¾                                      â”‚
â”‚  â”‚   â”œâ”€â”€ proxies/                      # ä»£ç†æ–‡ä»¶                                    â”‚
â”‚  â”‚   â””â”€â”€ renders/                      # æ¸²æŸ“è¾“å‡º                                    â”‚
â”‚  â”‚                                                                                   â”‚
â”‚  â”œâ”€â”€ exports/                          # å¯¼å‡ºæ–‡ä»¶                                    â”‚
â”‚  â”‚   â”œâ”€â”€ *.pdf                         # PDF æ–‡æ¡£                                    â”‚
â”‚  â”‚   â”œâ”€â”€ *.docx                        # Word æ–‡æ¡£                                   â”‚
â”‚  â”‚   â”œâ”€â”€ *.fcpxml                      # FCPXML å·¥ç¨‹                                 â”‚
â”‚  â”‚   â””â”€â”€ *.edl                         # EDL å·¥ç¨‹                                    â”‚
â”‚  â”‚                                                                                   â”‚
â”‚  â”œâ”€â”€ data/                             # æ•°æ®ç›®å½•                                    â”‚
â”‚  â”‚   â”œâ”€â”€ keyframes/                    # å…³é”®å¸§å›¾ç‰‡                                  â”‚
â”‚  â”‚   â””â”€â”€ keyframe_cache/               # å…³é”®å¸§ç¼“å­˜                                  â”‚
â”‚  â”‚                                                                                   â”‚
â”‚  â””â”€â”€ pervis_director.db                # SQLite æ•°æ®åº“                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


## ğŸ”— API ç«¯ç‚¹æ±‡æ€»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              API ç«¯ç‚¹åˆ—è¡¨                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  ğŸ“ ç´ æç®¡ç† (/api/assets)                                                           â”‚
â”‚   â”œâ”€â”€ POST   /upload              ä¸Šä¼ ç´ æ                                           â”‚
â”‚   â”œâ”€â”€ GET    /{asset_id}          è·å–ç´ æä¿¡æ¯                                       â”‚
â”‚   â”œâ”€â”€ DELETE /{asset_id}          åˆ é™¤ç´ æ                                           â”‚
â”‚   â””â”€â”€ GET    /list                åˆ—å‡ºç´ æ                                           â”‚
â”‚                                                                                      â”‚
â”‚  ğŸ” æœç´¢ (/api/search)                                                               â”‚
â”‚   â”œâ”€â”€ POST   /hybrid              æ··åˆæœç´¢ (æ–‡æœ¬+è§†è§‰+æ ‡ç­¾)                          â”‚
â”‚   â”œâ”€â”€ POST   /text                çº¯æ–‡æœ¬æœç´¢                                         â”‚
â”‚   â””â”€â”€ POST   /visual              è§†è§‰æœç´¢                                           â”‚
â”‚                                                                                      â”‚
â”‚  ğŸ¬ æ—¶é—´çº¿ (/api/timeline)                                                           â”‚
â”‚   â”œâ”€â”€ POST   /create              åˆ›å»ºæ—¶é—´çº¿                                         â”‚
â”‚   â”œâ”€â”€ GET    /{timeline_id}       è·å–æ—¶é—´çº¿                                         â”‚
â”‚   â”œâ”€â”€ POST   /{timeline_id}/clip  æ·»åŠ ç‰‡æ®µ                                           â”‚
â”‚   â”œâ”€â”€ PUT    /clip/{clip_id}      æ›´æ–°ç‰‡æ®µ                                           â”‚
â”‚   â””â”€â”€ DELETE /clip/{clip_id}      åˆ é™¤ç‰‡æ®µ                                           â”‚
â”‚                                                                                      â”‚
â”‚  ğŸ“¤ å¯¼å‡º (/api/export)                                                               â”‚
â”‚   â”œâ”€â”€ POST   /script              å¯¼å‡ºå‰§æœ¬æ–‡æ¡£ (PDF/DOCX/MD)                         â”‚
â”‚   â”œâ”€â”€ POST   /beatboard           å¯¼å‡ºæ•…äº‹æ¿å›¾ç‰‡                                     â”‚
â”‚   â”œâ”€â”€ POST   /nle                 å¯¼å‡º NLE å·¥ç¨‹ (FCPXML/EDL)                         â”‚
â”‚   â”œâ”€â”€ POST   /timeline/video      å¯¼å‡ºè§†é¢‘                                           â”‚
â”‚   â”œâ”€â”€ GET    /timeline/video/status/{task_id}  è·å–æ¸²æŸ“çŠ¶æ€                          â”‚
â”‚   â”œâ”€â”€ POST   /timeline/video/cancel/{task_id}  å–æ¶ˆæ¸²æŸ“                              â”‚
â”‚   â”œâ”€â”€ GET    /timeline/video/download/{task_id} ä¸‹è½½è§†é¢‘                             â”‚
â”‚   â”œâ”€â”€ GET    /timeline/video/config  è·å–æ¸²æŸ“é…ç½®é€‰é¡¹                                â”‚
â”‚   â”œâ”€â”€ GET    /timeline/video/tasks   åˆ—å‡ºæ¸²æŸ“ä»»åŠ¡                                    â”‚
â”‚   â”œâ”€â”€ GET    /download/{export_id}   ä¸‹è½½å¯¼å‡ºæ–‡ä»¶                                    â”‚
â”‚   â””â”€â”€ GET    /history/{project_id}   è·å–å¯¼å‡ºå†å²                                    â”‚
â”‚                                                                                      â”‚
â”‚  ğŸ§™ é¡¹ç›®å‘å¯¼ (/api/wizard)                                                           â”‚
â”‚   â”œâ”€â”€ POST   /draft               åˆ›å»º/æ›´æ–°è‰ç¨¿                                      â”‚
â”‚   â”œâ”€â”€ GET    /draft/{project_id}  è·å–è‰ç¨¿                                           â”‚
â”‚   â”œâ”€â”€ POST   /parse-script        è§£æå‰§æœ¬                                           â”‚
â”‚   â”œâ”€â”€ POST   /analyze-characters  åˆ†æè§’è‰²                                           â”‚
â”‚   â”œâ”€â”€ POST   /analyze-scenes      åˆ†æåœºæ¬¡                                           â”‚
â”‚   â””â”€â”€ POST   /finalize            å®Œæˆå‘å¯¼                                           â”‚
â”‚                                                                                      â”‚
â”‚  ğŸ¤– AI (/api/ai)                                                                     â”‚
â”‚   â”œâ”€â”€ POST   /generate            AI ç”Ÿæˆ                                            â”‚
â”‚   â”œâ”€â”€ POST   /analyze             AI åˆ†æ                                            â”‚
â”‚   â””â”€â”€ GET    /status              AI æœåŠ¡çŠ¶æ€                                        â”‚
â”‚                                                                                      â”‚
â”‚  ğŸ–¼ï¸ å…³é”®å¸§ (/api/keyframes)                                                          â”‚
â”‚   â”œâ”€â”€ POST   /extract/{asset_id}  æå–å…³é”®å¸§                                         â”‚
â”‚   â”œâ”€â”€ GET    /{asset_id}          è·å–å…³é”®å¸§åˆ—è¡¨                                     â”‚
â”‚   â””â”€â”€ GET    /job/{job_id}        è·å–æå–ä»»åŠ¡çŠ¶æ€                                   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æ•°æ®åº“è¡¨ç»“æ„                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  projects              é¡¹ç›®è¡¨                                                        â”‚
â”‚   â”œâ”€â”€ id               ä¸»é”®                                                          â”‚
â”‚   â”œâ”€â”€ title            é¡¹ç›®æ ‡é¢˜                                                      â”‚
â”‚   â”œâ”€â”€ logline          ä¸€å¥è¯æ¦‚è¦                                                    â”‚
â”‚   â”œâ”€â”€ synopsis         å‰§æƒ…ç®€ä»‹                                                      â”‚
â”‚   â”œâ”€â”€ script_raw       åŸå§‹å‰§æœ¬                                                      â”‚
â”‚   â”œâ”€â”€ characters       è§’è‰²åˆ—è¡¨ (JSON)                                               â”‚
â”‚   â”œâ”€â”€ specs            é¡¹ç›®è§„æ ¼ (JSON)                                               â”‚
â”‚   â””â”€â”€ current_stage    å½“å‰é˜¶æ®µ                                                      â”‚
â”‚                                                                                      â”‚
â”‚  beats                 Beat è¡¨                                                       â”‚
â”‚   â”œâ”€â”€ id               ä¸»é”®                                                          â”‚
â”‚   â”œâ”€â”€ project_id       é¡¹ç›®ID                                                        â”‚
â”‚   â”œâ”€â”€ order_index      é¡ºåºç´¢å¼•                                                      â”‚
â”‚   â”œâ”€â”€ content          å†…å®¹                                                          â”‚
â”‚   â”œâ”€â”€ emotion_tags     æƒ…ç»ªæ ‡ç­¾ (JSON)                                               â”‚
â”‚   â”œâ”€â”€ scene_tags       åœºæ™¯æ ‡ç­¾ (JSON)                                               â”‚
â”‚   â”œâ”€â”€ action_tags      åŠ¨ä½œæ ‡ç­¾ (JSON)                                               â”‚
â”‚   â”œâ”€â”€ cinematography_tags é•œå¤´æ ‡ç­¾ (JSON)                                            â”‚
â”‚   â”œâ”€â”€ duration         æ—¶é•¿                                                          â”‚
â”‚   â””â”€â”€ main_asset_id    ä¸»ç´ æID                                                      â”‚
â”‚                                                                                      â”‚
â”‚  assets                ç´ æè¡¨                                                        â”‚
â”‚   â”œâ”€â”€ id               ä¸»é”®                                                          â”‚
â”‚   â”œâ”€â”€ project_id       é¡¹ç›®ID                                                        â”‚
â”‚   â”œâ”€â”€ filename         æ–‡ä»¶å                                                        â”‚
â”‚   â”œâ”€â”€ mime_type        MIME ç±»å‹                                                     â”‚
â”‚   â”œâ”€â”€ file_path        æ–‡ä»¶è·¯å¾„                                                      â”‚
â”‚   â”œâ”€â”€ proxy_path       ä»£ç†æ–‡ä»¶è·¯å¾„                                                  â”‚
â”‚   â”œâ”€â”€ thumbnail_path   ç¼©ç•¥å›¾è·¯å¾„                                                    â”‚
â”‚   â”œâ”€â”€ processing_status å¤„ç†çŠ¶æ€                                                     â”‚
â”‚   â””â”€â”€ tags             æ ‡ç­¾ (JSON)                                                   â”‚
â”‚                                                                                      â”‚
â”‚  timelines             æ—¶é—´çº¿è¡¨                                                      â”‚
â”‚   â”œâ”€â”€ id               ä¸»é”®                                                          â”‚
â”‚   â”œâ”€â”€ project_id       é¡¹ç›®ID                                                        â”‚
â”‚   â”œâ”€â”€ name             åç§°                                                          â”‚
â”‚   â””â”€â”€ duration         æ€»æ—¶é•¿                                                        â”‚
â”‚                                                                                      â”‚
â”‚  clips                 ç‰‡æ®µè¡¨                                                        â”‚
â”‚   â”œâ”€â”€ id               ä¸»é”®                                                          â”‚
â”‚   â”œâ”€â”€ timeline_id      æ—¶é—´çº¿ID                                                      â”‚
â”‚   â”œâ”€â”€ asset_id         ç´ æID                                                        â”‚
â”‚   â”œâ”€â”€ start_time       å¼€å§‹æ—¶é—´                                                      â”‚
â”‚   â”œâ”€â”€ end_time         ç»“æŸæ—¶é—´                                                      â”‚
â”‚   â”œâ”€â”€ trim_start       å…¥ç‚¹                                                          â”‚
â”‚   â”œâ”€â”€ trim_end         å‡ºç‚¹                                                          â”‚
â”‚   â”œâ”€â”€ volume           éŸ³é‡                                                          â”‚
â”‚   â”œâ”€â”€ transition_type  è½¬åœºç±»å‹                                                      â”‚
â”‚   â””â”€â”€ order_index      é¡ºåºç´¢å¼•                                                      â”‚
â”‚                                                                                      â”‚
â”‚  render_tasks          æ¸²æŸ“ä»»åŠ¡è¡¨                                                    â”‚
â”‚   â”œâ”€â”€ id               ä¸»é”®                                                          â”‚
â”‚   â”œâ”€â”€ timeline_id      æ—¶é—´çº¿ID                                                      â”‚
â”‚   â”œâ”€â”€ format           æ ¼å¼                                                          â”‚
â”‚   â”œâ”€â”€ resolution       åˆ†è¾¨ç‡                                                        â”‚
â”‚   â”œâ”€â”€ framerate        å¸§ç‡                                                          â”‚
â”‚   â”œâ”€â”€ quality          è´¨é‡                                                          â”‚
â”‚   â”œâ”€â”€ status           çŠ¶æ€                                                          â”‚
â”‚   â”œâ”€â”€ progress         è¿›åº¦                                                          â”‚
â”‚   â”œâ”€â”€ output_path      è¾“å‡ºè·¯å¾„                                                      â”‚
â”‚   â””â”€â”€ file_size        æ–‡ä»¶å¤§å°                                                      â”‚
â”‚                                                                                      â”‚
â”‚  export_history        å¯¼å‡ºå†å²è¡¨                                                    â”‚
â”‚   â”œâ”€â”€ id               ä¸»é”®                                                          â”‚
â”‚   â”œâ”€â”€ project_id       é¡¹ç›®ID                                                        â”‚
â”‚   â”œâ”€â”€ export_type      å¯¼å‡ºç±»å‹                                                      â”‚
â”‚   â”œâ”€â”€ file_path        æ–‡ä»¶è·¯å¾„                                                      â”‚
â”‚   â”œâ”€â”€ file_format      æ–‡ä»¶æ ¼å¼                                                      â”‚
â”‚   â””â”€â”€ status           çŠ¶æ€                                                          â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2025-12-27
**ç‰ˆæœ¬**: 1.0
