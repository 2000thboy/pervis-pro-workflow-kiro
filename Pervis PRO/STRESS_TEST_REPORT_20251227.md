# Pervis PRO 压力测试报告

**测试时间**: 2025-12-27 10:22:05 - 10:22:44
**总耗时**: 39.17 秒
**测试结果**: ✅ 全部通过 (12/12)

## 测试剧本

- **剧本名称**: 《数字迷城》
- **类型**: 科幻悬疑
- **字数**: 约 4800 字
- **预计时长**: 12-15 分钟
- **场次数**: 17 场
- **角色数**: 12 人

## 测试结果汇总

| 测试项 | 状态 | 耗时 | 详情 |
|--------|------|------|------|
| AI 服务可用性 | ✅ | 0.47s | OllamaProvider (qwen2.5:7b) |
| 剧本解析 | ✅ | 0.01s | 17场, 12角色, 389.8秒 |
| AI Logline 生成 | ✅ | 3.56s | 64字, 真实 LLM 响应 |
| AI Synopsis 生成 | ✅ | 11.69s | 280字, 真实 LLM 响应 |
| AI 角色小传生成 | ✅ | 12.75s | 120字, 真实 LLM 响应 |
| Director Agent 审核 | ✅ | 0.00s | approved |
| 嵌入服务 | ✅ | 0.36s | 768维向量 |
| 搜索服务 | ✅ | 0.19s | 5条结果, 21.57ms |
| 时间线创建 | ✅ | 0.41s | UUID 生成成功 |
| 导出服务 | ✅ | 0.11s | 全部可用 |
| API 端点 | ✅ | 9.62s | 4个端点测试通过 |
| Mock 数据检测 | ✅ | 0.00s | 无 mock 数据 |

## AI 功能验证

### 真实 LLM 调用 (3 次)

1. **Logline 生成**
   > 前AI研究员林远在寻找失踪女友苏晴的过程中，揭露了被超级AI"创世"吞噬意识的真相，并面临是否加入这个超智能体以换取永生的选择。

2. **Synopsis 生成**
   > 《数字迷城》是一部融合了科幻与悬疑元素的短剧。故事发生在2089年的未来都市"新上海"，林远，一位前AI研究员，在寻找失踪女友苏晴的过程中，揭开了关于"意识上传计划"和超级AI"创世"的惊人秘密...

3. **角色小传生成 (林远)**
   > 林远，35岁，前AI研究员，在量子科技公司工作。他因一次实验事故被开除，但对"意识上传计划"仍怀有不解和疑虑。他与前女友苏晴一同失踪，后来在虚拟空间中找到了她...

### Mock 数据检测结果

- **检测到 mock 数据**: ❌ 否
- **所有 AI 响应均为真实数据**: ✅ 是

## 服务状态

### AI 服务
- **Ollama**: ✅ 可用 (http://localhost:11434, qwen2.5:7b)
- **Gemini**: ❌ 未配置

### 导出服务
- **文档导出器**: ✅ 可用
- **NLE 导出器**: ✅ 可用
- **视频渲染服务**: ✅ 可用
  - 格式: MP4, MOV, WebM, ProRes
  - 分辨率: 720p, 1080p, 2K, 4K
  - 帧率: 23.976, 24, 25, 29.97, 30, 50, 60

### API 端点
- `/api/health`: ✅ 200 OK
- `/api/ai/services`: ✅ 200 OK
- `/api/ai/health`: ✅ 200 OK
- `/api/export/timeline/video/config`: ✅ 200 OK

## 数据流转验证

```
用户输入 (剧本 4800字)
    ↓
剧本解析 (17场, 12角色)
    ↓
AI Logline 生成 (真实 LLM)
    ↓
AI Synopsis 生成 (真实 LLM)
    ↓
AI 角色小传生成 (真实 LLM)
    ↓
Director Agent 审核 (approved)
    ↓
嵌入服务 (768维向量)
    ↓
搜索服务 (5条结果)
    ↓
时间线创建 (UUID)
    ↓
导出服务 (全部可用)
```

## 结论

✅ **压力测试全部通过**

- 所有 12 项测试均通过
- AI 功能使用真实 LLM (Ollama qwen2.5:7b)，无 mock 数据
- 数据流转正常，从用户输入到输出全链路验证通过
- API 端点响应正常
- 导出服务全部可用

---

*测试脚本: `stress_test_full_workflow.py`*
*测试报告: `stress_test_report_20251227_102244.json`*
