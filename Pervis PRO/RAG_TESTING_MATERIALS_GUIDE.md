# 🎬 Pervis PRO RAG系统测试素材指南

## 📋 测试素材需求总览

为了全面测试增强后的RAG系统，我们需要构建一个多样化的测试素材库，涵盖不同类型的视频内容、音频质量和视觉特征。

## 🎯 素材库规模和结构

### 基础测试集 (MVP验证)
- **总数量**: 20-30个视频文件
- **总时长**: 30分钟 - 2小时
- **存储需求**: 5-15GB (原始) + 2-8GB (处理后)
- **处理时间**: 1-3小时 (标准硬件)

### 完整测试集 (生产验证)  
- **总数量**: 100-150个视频文件
- **总时长**: 3-8小时
- **存储需求**: 50-200GB (原始) + 20-80GB (处理后)
- **处理时间**: 8-24小时 (标准硬件)

## 🎥 视频内容分类需求

### 1. 情绪和氛围类别 (40%比重)
```
紧张刺激类 (5-8个视频):
- 追逐戏、打斗场面、悬疑片段
- 快节奏剪辑、紧张音乐
- 测试目标: 情绪标签准确性

温馨治愈类 (5-8个视频):
- 家庭聚会、自然风光、温馨对话
- 柔和光线、舒缓音乐
- 测试目标: 氛围识别能力

悲伤沉重类 (3-5个视频):
- 告别场景、雨天镜头、低沉音乐
- 冷色调、慢镜头
- 测试目标: 情感理解深度
```

### 2. 场景和环境类别 (30%比重)
```
城市环境 (6-10个视频):
- 街道、建筑、车流、人群
- 白天/夜晚不同时段
- 测试目标: 场景识别准确性

自然环境 (4-6个视频):
- 森林、海滩、山脉、田野
- 不同季节和天气
- 测试目标: 自然场景理解

室内环境 (3-5个视频):
- 家庭、办公室、餐厅、商店
- 不同装修风格和光线
- 测试目标: 室内空间识别
```

### 3. 镜头语言类别 (20%比重)
```
镜头运动 (4-6个视频):
- 推拉摇移、跟拍、航拍
- 手持摄影、稳定器拍摄
- 测试目标: 镜头技法识别

景别变化 (3-5个视频):
- 远景、全景、中景、近景、特写
- 景别切换和构图变化
- 测试目标: 构图理解能力
```

### 4. 音频内容类别 (10%比重)
```
对话内容 (3-5个视频):
- 清晰对话、多人对话、方言口音
- 不同语速和音量
- 测试目标: 语音转录准确性

音效和音乐 (2-3个视频):
- 背景音乐、环境音效、音效设计
- 不同音频质量
- 测试目标: 音频内容理解
```

## 🔧 素材预处理要求

### 文件格式标准化
```bash
# 推荐格式
视频格式: MP4 (H.264编码)
分辨率: 1920x1080 或 1280x720
帧率: 24fps 或 30fps
音频: AAC编码, 48kHz采样率

# 文件命名规范
[类别]_[情绪]_[场景]_[时长]_[序号].mp4
例如: emotion_tense_chase_120s_001.mp4
```

### 元数据准备
为每个视频文件创建对应的JSON元数据文件：

```json
{
  "filename": "emotion_tense_chase_120s_001.mp4",
  "duration": 120,
  "description": "紧张的城市夜晚追逐戏",
  "expected_tags": {
    "emotions": ["紧张", "刺激", "恐惧"],
    "scenes": ["城市", "夜晚", "街道"],
    "actions": ["追逐", "奔跑", "驾驶"],
    "cinematography": ["手持摄影", "快速剪辑", "追拍"]
  },
  "audio_content": {
    "has_dialogue": true,
    "has_music": true,
    "has_effects": true,
    "language": "zh-CN"
  },
  "visual_features": {
    "dominant_colors": ["深蓝", "橙黄"],
    "lighting": "夜晚人工光源",
    "composition": "动态构图"
  },
  "test_queries": [
    "紧张的追逐戏",
    "夜晚城市场景",
    "快节奏动作片段"
  ]
}
```

## 🧪 测试用例设计

### 1. 基础功能测试
```
单模态搜索测试:
- 纯文本查询: "温馨的家庭聚会"
- 纯情绪查询: "悲伤的氛围"
- 纯场景查询: "海边日落"

多模态搜索测试:
- 文本+视觉: "蓝色调的城市夜景"
- 文本+音频: "有对话的室内场景"
- 三模态融合: "紧张音乐的追逐戏"
```

### 2. 边界情况测试
```
音频质量测试:
- 清晰录音 vs 嘈杂环境
- 单人对话 vs 多人混杂
- 标准普通话 vs 方言口音

视觉复杂度测试:
- 简单构图 vs 复杂场面
- 明亮光线 vs 昏暗环境
- 静态画面 vs 快速运动
```

### 3. 性能压力测试
```
批量处理测试:
- 同时上传10个视频文件
- 监控处理时间和资源占用
- 验证并发处理稳定性

大文件处理测试:
- 单个文件>1GB的视频
- 超长视频(>30分钟)
- 高分辨率视频(4K)
```

## 📊 测试评估标准

### 搜索准确性指标
```
召回率 (Recall): 
- 相关结果被找到的比例
- 目标: >80%

精确率 (Precision):
- 返回结果中相关的比例  
- 目标: >70%

响应时间:
- 搜索查询响应时间
- 目标: <2秒
```

### 转录准确性指标
```
词错误率 (WER):
- 转录错误词汇的比例
- 目标: <15% (清晰音频)
- 目标: <30% (嘈杂音频)

时间对齐精度:
- 字幕时间戳准确性
- 目标: ±0.5秒误差
```

### 视觉识别指标
```
标签准确性:
- 自动生成标签的正确率
- 目标: >75%

相似度匹配:
- 视觉相似视频的匹配准确性
- 目标: >70%
```

## 🚀 素材获取建议

### 推荐素材来源
```
1. 开源视频库:
   - Pixabay, Pexels (免费商用)
   - Internet Archive (公共领域)
   - Creative Commons视频

2. 自制测试素材:
   - 手机拍摄日常场景
   - 不同环境和光线条件
   - 多样化的音频内容

3. 电影片段 (仅测试用):
   - 经典电影片段
   - 不同类型和风格
   - 注意版权限制
```

### 素材准备清单
```
□ 收集20-30个基础测试视频
□ 为每个视频创建元数据JSON
□ 准备测试查询用例列表
□ 设置预期结果基准
□ 准备性能测试脚本
□ 建立评估指标体系
```

## 💡 开发测试建议

### 迭代测试策略
```
第一轮: 基础功能验证
- 使用5-10个高质量视频
- 验证核心功能正常工作
- 修复基础bug和问题

第二轮: 多样性测试  
- 扩展到20-30个视频
- 测试不同类型和质量
- 优化算法参数

第三轮: 规模化测试
- 使用完整100+视频库
- 性能和稳定性验证
- 生产环境准备
```

---

**准备好测试素材后，我将帮你逐步实现这三个增强方向的功能！**