# Assembly模块设计

## 核心理念
像AE/PR一样的时间轴装配，但专门为文字游戏优化

## 界面布局
```
┌─────────────────────────────────────────────────────────────┐
│ Project: 明末侦探录                    [Export] [Validate]    │
├─────────────────────────────────────────────────────────────┤
│ Timeline (Main)                                             │
│ ┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐      │
│ │CH01 │CH02 │CH03 │CH04 │CH05 │CH06 │CH07 │CH08 │CH09 │      │
│ │INTRO│INVST│CHOIC│INVST│CHOIC│INVST│CHOIC│END1 │END2 │      │
│ │ 8m  │ 12m │ 5m  │ 15m │ 8m  │ 10m │ 6m  │ 4m  │ 4m  │      │
│ └─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘      │
├─────────────────────────────────────────────────────────────┤
│ Variables Track                                             │
│ has_clue_main    : ████████████░░░░░░░░░░░░░░░░░░░░░░░░░      │
│ is_suspect_trust : ░░░░░░░░████████████░░░░░░░░░░░░░░░░░      │
│ trust_villager   : ░░░░░░░░░░░░░░░░████████████████████      │
├─────────────────────────────────────────────────────────────┤
│ Inspector (Selected: CH03_CHOICE_SUSPECT)                   │
│ Type: CHOICE | Duration: 5min | Variables: [trust_suspect]  │
│ Content: [Preview] | Assets: [bg_inn, char_detective]       │
│ Choices: [质疑证词] [相信说辞] [继续调查]                      │
└─────────────────────────────────────────────────────────────┘
```

## 核心功能

### 1. Timeline管理
- 拖拽排序Scene
- 可视化时长分布
- 自动计算总时长
- 分支路径预览

### 2. Variables Track
- 实时显示变量生命周期
- 冲突检测（同时修改同一变量）
- 未使用变量警告
- 结局条件覆盖率

### 3. Inspector面板
- Scene详情查看
- 资产占位符管理
- 快速内容预览
- 验证状态显示

### 4. 并行查看能力
解决你说的"切软件容易乱"问题：
- 同时显示：时间轴 + 变量状态 + 当前Scene
- 不需要切换就能判断：节奏、逻辑、完整性
- 实时验证：修改立即反馈是否合法

## 关键约束
- **只能装配，不能创作**：不允许直接编辑文本
- **强制规范**：拖拽时自动检查命名和类型
- **实时校验**：任何修改立即验证合法性
- **一键导出**：直接生成Ren'Py项目结构